# -*- coding:utf-8 -*-
from unittest import TestCase, mock

from dao.dsm_dao import dsm_dao
from dao.task_onto_dao import task_dao_onto
from service.Otl_Service import otl_service
from dao.otl_dao import otl_dao
from dao.graph_dao import graph_dao
import pandas as pd


# test新增本体
class Test_ontology_save(TestCase):
    def setUp(self) -> None:
        self.params_json = {'ontology_name': 'name', 'ontology_des': 'description'}

        # mock otl_dao.get_ontology
        ontology_name_row = []
        column = ['entity', 'edge']
        ontology_name = pd.DataFrame(ontology_name_row, columns=column)
        otl_dao.get_ontology = mock.Mock(return_value=ontology_name)

        # mock otl_dao.insert_Ontology
        ontology_id = 1
        otl_dao.insert_Ontology = mock.Mock(return_value=ontology_id)

    # success
    def test_ontology_save_success(self):
        res = otl_service.ontology_save(self.params_json)
        self.assertEqual(res[0], 200)

    # 本体名称已存在
    def test_ontology_save_name_exists(self):
        # mock otl_dao.get_ontology
        ontology_name_row = [['[]', '[]']]
        column = ['entity', 'edge']
        ontology_name = pd.DataFrame(ontology_name_row, columns=column)
        otl_dao.get_ontology = mock.Mock(return_value=ontology_name)

        res = otl_service.ontology_save(self.params_json)
        self.assertEqual(res[0], 500)

    # 异常
    def test_ontology_save_exception(self):
        otl_dao.insert_Ontology = mock.Mock(return_value=[], side_effect=Exception('database Unusable!'))

        res = otl_service.ontology_save(self.params_json)
        self.assertEqual(res[0], 500)


# test更新本体名
class Test_update_name(TestCase):
    def setUp(self) -> None:
        # parameters
        self.otl_id = 24
        self.params_json = {"ontology_name": "name", "ontology_des": "des"}
        self.host_url = ""
        self.flag = "0"
        
        df_row = [[24, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-10-27 23:12:26', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-10-28 04:12:57', 'sdgfd', '', 'available', "[{'entity_id': 1, 'colour': '#FFC106', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'folder', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['path', 'string'], ['gns', 'string'], ['create_time', 'string'], ['rev', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'path', 'gns', 'create_time', 'rev'], 'model': 'Anysharedocumentmodel', 'ds_address': '', 'alias': '目录'}, {'entity_id': 2, 'colour': '#3E52B5', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'document', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['path', 'string'], ['creator', 'string'], ['create_time', 'string'], ['editor', 'string'], ['gns', 'string'], ['file_type', 'string'], ['modified_time', 'string'], ['rev', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'path', 'creator', 'create_time', 'editor', 'gns', 'file_type', 'modified_time', 'rev'], 'model': 'Anysharedocumentmodel', 'ds_address': '', 'alias': '文档'}, {'entity_id': 3, 'colour': '#795648', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'chapter', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['path', 'string'], ['level', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'path', 'level'], 'model': 'Anysharedocumentmodel', 'ds_address': '', 'alias': '章节'}, {'entity_id': 4, 'colour': '#FFC106', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'text', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Anysharedocumentmodel', 'ds_address': '', 'alias': '正文'}, {'entity_id': 5, 'colour': '#F44336', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'label', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['confidence', 'float'], ['adlabel_kcid', 'string'], ['kc_topic_tags', 'string'], ['type_as', 'boolean'], ['type_sa', 'boolean'], ['type_nw', 'boolean'], ['type_kc', 'boolean']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'confidence', 'adlabel_kcid', 'kc_topic_tags', 'type_as', 'type_sa', 'type_nw', 'type_kc'], 'model': 'Anysharedocumentmodel', 'ds_address': '', 'alias': '标签'}, {'entity_id': 6, 'colour': '#ED679F', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'desc', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Anysharedocumentmodel', 'ds_address': '', 'alias': '解释'}]", "[{'edge_id': 1, 'colour': '#795648', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'desc2document', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Anysharedocumentmodel', 'relations': ['desc', 'desc2document', 'document'], 'ds_address': '', 'alias': '出现于'}, {'edge_id': 2, 'colour': '#FF9800', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'desc2label', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['weight', 'float']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'weight'], 'model': 'Anysharedocumentmodel', 'relations': ['desc', 'desc2label', 'label'], 'ds_address': '', 'alias': '解释是'}, {'edge_id': 3, 'colour': '#0288D1', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'folder2folder', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Anysharedocumentmodel', 'relations': ['folder', 'folder2folder', 'folder'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 4, 'colour': '#374047', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'folder2document', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Anysharedocumentmodel', 'relations': ['folder', 'folder2document', 'document'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 5, 'colour': '#FF9800', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'document2chapter', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Anysharedocumentmodel', 'relations': ['document', 'document2chapter', 'chapter'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 6, 'colour': '#ED679F', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'document2text', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Anysharedocumentmodel', 'relations': ['document', 'document2text', 'text'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 7, 'colour': '#FF9800', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'text2text', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Anysharedocumentmodel', 'relations': ['text', 'text2text', 'text'], 'ds_address': '', 'alias': 'A相关B'}, {'edge_id': 8, 'colour': '#0288D1', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'chapter2text', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Anysharedocumentmodel', 'relations': ['chapter', 'chapter2text', 'text'], 'ds_address': '', 'alias': '内容是'}, {'edge_id': 9, 'colour': '#3E52B5', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'label2label', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['weight', 'float']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'weight'], 'model': 'Anysharedocumentmodel', 'relations': ['label', 'label2label', 'label'], 'ds_address': '', 'alias': '关联'}, {'edge_id': 10, 'colour': '#607D8B', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'label2document', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['weight', 'float']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'weight'], 'model': 'Anysharedocumentmodel', 'relations': ['label', 'label2document', 'document'], 'ds_address': '', 'alias': '出现于'}]", '[]', '[]']]
        df_null_row = []
        column = ['id', 'create_user', 'create_time', 'update_user', 'update_time', 'ontology_name', 'ontology_des', 'otl_status', 'entity', 'edge', 'used_task', 'all_task']
        self.df = pd.DataFrame(df_row, columns = column)
        self.df_null = pd.DataFrame(df_null_row, columns=column)
        otl_dao.getbyid = mock.Mock(return_value=self.df)

        graph_otl = ["graph_name"]
        graph_dao.getdatabyotlid = mock.Mock(return_value=graph_otl)
        
        otl_dao.update_name = mock.Mock(return_value=0)
    
    # success
    def test_update_name_success(self):
        res = otl_service.update_name(self.otl_id, self.params_json, self.host_url, self.flag)
        self.assertEqual(res[0], 200)

        graph_dao.getdatabyotlid = mock.Mock(return_value=[])
        res = otl_service.update_name(self.otl_id, self.params_json, self.host_url, self.flag)
        self.assertEqual(res[0], 200)
        
    # exception
    def test_update_name_exception(self):
        otl_dao.getbyid = mock.Mock(side_effect=Exception("database error"))
        res = otl_service.update_name(self.otl_id, self.params_json, self.host_url, self.flag)
        self.assertEqual(res[0], 500)
        
    # 本体不存在
    def test_update_name_otlid_not_exist(self):
        otl_dao.getbyid = mock.Mock(return_value=self.df_null)
        res = otl_service.update_name(self.otl_id, self.params_json, self.host_url, self.flag)
        self.assertEqual(res[0], 500)

    # 不可编辑
    def test_update_name_can_not_edit(self):
        res = otl_service.update_name(self.otl_id, self.params_json, self.host_url, flag="-1")
        self.assertEqual(res[0], 500)


# test更新本体信息
class Test_update_info(TestCase):
    def setUp(self) -> None:
        # parameters
        self.otlid = 24
        self.params_json = {"ontology_id":"24","entity":[{"colour":"#805A9C","ds_name":"结构化数据","dataType":"structured","extract_type":"standardExtraction","file_type":"csv","task_id":"55","name":"nei1","source_table":[["gns://B4FFFD35301B43B78DAEA4737A364C47/DC6942AC590846C297A52346AE9B27F0/EDEA69091B1B4538BE74AAA9535D0E66","结构化数据/csv/nei1.csv","nei1.csv"]],"source_type":"automatic","properties":[["name","string"],["p","string"],["s","string"]],"properties_index":["name","p","s"],"data_source":"as7","ds_path":"结构化数据","model":"","entity_id":4,"ds_id":"5"},{"colour":"#F0E34F","ds_name":"结构化数据","dataType":"structured","extract_type":"standardExtraction","file_type":"csv","name":"o","task_id":"55","source_table":[["gns://B4FFFD35301B43B78DAEA4737A364C47/DC6942AC590846C297A52346AE9B27F0/0828A7CE101D433690F7D5ADA7AB4DD4","结构化数据/csv/o.csv","o.csv"]],"source_type":"automatic","properties":[["name","string"],["o","string"]],"properties_index":["name","o"],"data_source":"as7","ds_path":"结构化数据","model":"","entity_id":6,"ds_id":"4"},{"colour":"#5C539B","ds_name":"结构化数据","dataType":"structured","extract_type":"standardExtraction","file_type":"csv","name":"s","task_id":"55","source_table":[["gns://B4FFFD35301B43B78DAEA4737A364C47/DC6942AC590846C297A52346AE9B27F0/2590BB8A10904D6EA3B65ADE23CED0BA","结构化数据/csv/s.csv","s.csv"]],"source_type":"automatic","properties":[["name","string"],["s","string"]],"properties_index":["name","s"],"data_source":"as7","ds_path":"结构化数据","model":"","entity_id":1,"ds_id":"4"}],"edge":[],"used_task":[1,23],"flag":"nextstep"}
        self.host_url = ""
        self.flag = "-1"
        
        df_row = [[24, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-10-27 23:12:26', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-10-28 04:12:57', 'sdgfd', '', 'available', "[{'entity_id': 1, 'colour': '#FFC106', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'folder', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['path', 'string'], ['gns', 'string'], ['create_time', 'string'], ['rev', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'path', 'gns', 'create_time', 'rev'], 'model': 'Anysharedocumentmodel', 'ds_address': '', 'alias': '目录'}, {'entity_id': 2, 'colour': '#3E52B5', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'document', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['path', 'string'], ['creator', 'string'], ['create_time', 'string'], ['editor', 'string'], ['gns', 'string'], ['file_type', 'string'], ['modified_time', 'string'], ['rev', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'path', 'creator', 'create_time', 'editor', 'gns', 'file_type', 'modified_time', 'rev'], 'model': 'Anysharedocumentmodel', 'ds_address': '', 'alias': '文档'}, {'entity_id': 3, 'colour': '#795648', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'chapter', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['path', 'string'], ['level', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'path', 'level'], 'model': 'Anysharedocumentmodel', 'ds_address': '', 'alias': '章节'}, {'entity_id': 4, 'colour': '#FFC106', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'text', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Anysharedocumentmodel', 'ds_address': '', 'alias': '正文'}, {'entity_id': 5, 'colour': '#F44336', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'label', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['confidence', 'float'], ['adlabel_kcid', 'string'], ['kc_topic_tags', 'string'], ['type_as', 'boolean'], ['type_sa', 'boolean'], ['type_nw', 'boolean'], ['type_kc', 'boolean']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'confidence', 'adlabel_kcid', 'kc_topic_tags', 'type_as', 'type_sa', 'type_nw', 'type_kc'], 'model': 'Anysharedocumentmodel', 'ds_address': '', 'alias': '标签'}, {'entity_id': 6, 'colour': '#ED679F', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'desc', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Anysharedocumentmodel', 'ds_address': '', 'alias': '解释'}]", "[{'edge_id': 1, 'colour': '#795648', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'desc2document', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Anysharedocumentmodel', 'relations': ['desc', 'desc2document', 'document'], 'ds_address': '', 'alias': '出现于'}, {'edge_id': 2, 'colour': '#FF9800', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'desc2label', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['weight', 'float']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'weight'], 'model': 'Anysharedocumentmodel', 'relations': ['desc', 'desc2label', 'label'], 'ds_address': '', 'alias': '解释是'}, {'edge_id': 3, 'colour': '#0288D1', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'folder2folder', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Anysharedocumentmodel', 'relations': ['folder', 'folder2folder', 'folder'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 4, 'colour': '#374047', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'folder2document', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Anysharedocumentmodel', 'relations': ['folder', 'folder2document', 'document'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 5, 'colour': '#FF9800', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'document2chapter', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Anysharedocumentmodel', 'relations': ['document', 'document2chapter', 'chapter'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 6, 'colour': '#ED679F', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'document2text', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Anysharedocumentmodel', 'relations': ['document', 'document2text', 'text'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 7, 'colour': '#FF9800', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'text2text', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Anysharedocumentmodel', 'relations': ['text', 'text2text', 'text'], 'ds_address': '', 'alias': 'A相关B'}, {'edge_id': 8, 'colour': '#0288D1', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'chapter2text', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Anysharedocumentmodel', 'relations': ['chapter', 'chapter2text', 'text'], 'ds_address': '', 'alias': '内容是'}, {'edge_id': 9, 'colour': '#3E52B5', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'label2label', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['weight', 'float']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'weight'], 'model': 'Anysharedocumentmodel', 'relations': ['label', 'label2label', 'label'], 'ds_address': '', 'alias': '关联'}, {'edge_id': 10, 'colour': '#607D8B', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'label2document', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['weight', 'float']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'weight'], 'model': 'Anysharedocumentmodel', 'relations': ['label', 'label2document', 'document'], 'ds_address': '', 'alias': '出现于'}]", '[]', '[]']]
        df_null_row = []
        columns = ['id', 'create_user', 'create_time', 'update_user', 'update_time', 'ontology_name', 'ontology_des', 'otl_status', 'entity', 'edge', 'used_task', 'all_task']
        df = pd.DataFrame(df_row, columns=columns)
        self.df_null = pd.DataFrame(df_null_row, columns=columns)
        otl_dao.getbyid = mock.Mock(return_value=df)

        all_data_row = []
        all_data_running_row = [[18, '24', '853ba1db-4e37-11eb-a57d-0242ac190002', 'account', 'table', '2021-11-18 22:45:56', '2021-11-19 11:45:56', 'running', 'efd0e1e6-db66-4d7c-ba86-674bb20fcaf4', "{'entity_list': [['account', '']], 'entity_property_dict': [{'entity': 'account', 'property': [['name', 'string'], ['id', 'string'], ['passwd', 'string'], ['email', 'string'], ['type', 'string'], ['desc', 'string'], ['status', 'string'], ['uuid', 'string'], ['expire_time', 'datetime'], ['create_time', 'datetime'], ['app_id', 'string'], ['pass_st', 'datetime'], ['pass_ct', 'string'], ['locked_dur', 'string'], ['pass_len', 'string'], ['pass_dur', 'string'], ['activation', 'string']]}], 'entity_relation_set': [], 'entity_main_table_dict': [{'entity': 'account', 'main_table': ['account']}], 'relation_main_table_dict': [], 'relation_property_dict': [], 'extract_type': '标准抽取'}", "[['account', 'anydata', 'msql', 'success', 'mysql']]", '9', ''], [19, '24', '853ba1db-4e37-11eb-a57d-0242ac190002', 'keywords2.csv', 'csv', '2021-11-19 00:28:41', '2021-11-19 13:28:45', 'running', '68ae236e-01e0-4d9b-baf4-c3c246b3ddf4', "{'entity_list': [['keywords2', '']], 'entity_property_dict': [{'entity': 'keywords2', 'property': [['name', 'string']]}], 'entity_relation_set': [], 'entity_main_table_dict': [{'entity': 'keywords2', 'main_table': [['gns://66C055CA4C174BED938718B7E2883D76/AAC72632E754482E9B1D24AB6389A2FD', 'keywords2.csv', 'test/keywords2.csv']]}], 'relation_main_table_dict': [], 'relation_property_dict': [], 'extract_type': '标准抽取'}", "[['gns://66C055CA4C174BED938718B7E2883D76/AAC72632E754482E9B1D24AB6389A2FD', 'keywords2.csv', 'test/keywords2.csv', '1的副本', 'success', 'csv']]", '8', 'csv']]
        columns = ['task_id', 'ontology_id', 'create_user', 'task_name', 'task_type', 'create_time', 'finished_time', 'task_status', 'celery_task_id', 'result', 'file_list', 'ds_id', 'postfix']
        all_data = pd.DataFrame(all_data_row, columns=columns)
        self.all_data_running = pd.DataFrame(all_data_running_row, columns=columns)
        task_dao_onto.get_all_by_otlid = mock.Mock(return_value=all_data)

        graph_dao.getdatabyotlid = mock.Mock(return_value=[])

        otl_dao.update_info = mock.Mock(return_value=0)
    
    # success
    def test_update_info_success(self):
        res = otl_service.update_info(self.otlid, self.params_json, self.host_url, self.flag)
        self.assertEqual(res[0], 200)

        graph_dao.getdatabyotlid = mock.Mock(return_value=["graph_name"])
        res = otl_service.update_info(self.otlid, self.params_json, self.host_url, flag="0")
        self.assertEqual(res[0], 200)

    # exception
    def test_update_info_exception(self):
        otl_dao.getbyid = mock.Mock(side_effect=Exception("database error"))
        res = otl_service.update_info(self.otlid, self.params_json, self.host_url, self.flag)
        self.assertEqual(res[0], 500)

    # 有正在运行的任务
    def test_update_info_runnig_task(self):
        task_dao_onto.get_all_by_otlid = mock.Mock(return_value=self.all_data_running)
        
        res = otl_service.update_info(self.otlid, self.params_json, self.host_url, self.flag)
        self.assertEqual(res[0], 500)

    # 本体不存在
    def test_update_info_ontology_not_exist(self):
        otl_dao.getbyid = mock.Mock(return_value=self.df_null)
        res = otl_service.update_info(self.otlid, self.params_json, self.host_url, self.flag)
        self.assertEqual(res[0], 500)
        
    # 不可编辑
    def test_update_info_edit_used(self):
        graph_dao.getdatabyotlid = mock.Mock(return_value=["graph_name"])
        res = otl_service.update_info(self.otlid, self.params_json, self.host_url, self.flag)
        self.assertEqual(res[0], 500)
    

class Test_getall(TestCase):
    def setUp(self) -> None:
        # mock otl_dao.getCount
        otl_dao.getCount = mock.Mock(return_value=43)

        ret_10row = [['--', 'admin', '--', 'admin', 24, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-10-27 23:12:26', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-10-28 04:12:57', 'sdgfd', '', 'available', "[{'entity_id': 1, 'colour': '#FFC106', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'folder', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['path', 'string'], ['gns', 'string'], ['create_time', 'string'], ['rev', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'path', 'gns', 'create_time', 'rev'], 'model': 'Anysharedocumentmodel', 'ds_address': '', 'alias': '目录'}, {'entity_id': 2, 'colour': '#3E52B5', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'document', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['path', 'string'], ['creator', 'string'], ['create_time', 'string'], ['editor', 'string'], ['gns', 'string'], ['file_type', 'string'], ['modified_time', 'string'], ['rev', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'path', 'creator', 'create_time', 'editor', 'gns', 'file_type', 'modified_time', 'rev'], 'model': 'Anysharedocumentmodel', 'ds_address': '', 'alias': '文档'}, {'entity_id': 3, 'colour': '#795648', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'chapter', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['path', 'string'], ['level', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'path', 'level'], 'model': 'Anysharedocumentmodel', 'ds_address': '', 'alias': '章节'}, {'entity_id': 4, 'colour': '#FFC106', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'text', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Anysharedocumentmodel', 'ds_address': '', 'alias': '正文'}, {'entity_id': 5, 'colour': '#F44336', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'label', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['confidence', 'float'], ['adlabel_kcid', 'string'], ['kc_topic_tags', 'string'], ['type_as', 'boolean'], ['type_sa', 'boolean'], ['type_nw', 'boolean'], ['type_kc', 'boolean']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'confidence', 'adlabel_kcid', 'kc_topic_tags', 'type_as', 'type_sa', 'type_nw', 'type_kc'], 'model': 'Anysharedocumentmodel', 'ds_address': '', 'alias': '标签'}, {'entity_id': 6, 'colour': '#ED679F', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'desc', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Anysharedocumentmodel', 'ds_address': '', 'alias': '解释'}]", "[{'edge_id': 1, 'colour': '#795648', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'desc2document', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Anysharedocumentmodel', 'relations': ['desc', 'desc2document', 'document'], 'ds_address': '', 'alias': '出现于'}, {'edge_id': 2, 'colour': '#FF9800', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'desc2label', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['weight', 'float']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'weight'], 'model': 'Anysharedocumentmodel', 'relations': ['desc', 'desc2label', 'label'], 'ds_address': '', 'alias': '解释是'}, {'edge_id': 3, 'colour': '#0288D1', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'folder2folder', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Anysharedocumentmodel', 'relations': ['folder', 'folder2folder', 'folder'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 4, 'colour': '#374047', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'folder2document', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Anysharedocumentmodel', 'relations': ['folder', 'folder2document', 'document'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 5, 'colour': '#FF9800', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'document2chapter', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Anysharedocumentmodel', 'relations': ['document', 'document2chapter', 'chapter'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 6, 'colour': '#ED679F', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'document2text', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Anysharedocumentmodel', 'relations': ['document', 'document2text', 'text'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 7, 'colour': '#FF9800', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'text2text', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Anysharedocumentmodel', 'relations': ['text', 'text2text', 'text'], 'ds_address': '', 'alias': 'A相关B'}, {'edge_id': 8, 'colour': '#0288D1', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'chapter2text', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Anysharedocumentmodel', 'relations': ['chapter', 'chapter2text', 'text'], 'ds_address': '', 'alias': '内容是'}, {'edge_id': 9, 'colour': '#3E52B5', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'label2label', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['weight', 'float']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'weight'], 'model': 'Anysharedocumentmodel', 'relations': ['label', 'label2label', 'label'], 'ds_address': '', 'alias': '关联'}, {'edge_id': 10, 'colour': '#607D8B', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'label2document', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['weight', 'float']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'weight'], 'model': 'Anysharedocumentmodel', 'relations': ['label', 'label2document', 'document'], 'ds_address': '', 'alias': '出现于'}]", '[]', '[]'], ['--', 'admin', None, None, 25, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-10-27 23:20:15', 'admin', '2021-10-29 11:02:54', 'lzg', '', 'available', "[{'entity_id': 1, 'colour': '#92D427', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': '38', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'ds_address': ''}, {'entity_id': 2, 'colour': '#FC0F32', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': '39', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'ds_address': ''}]", '[]', '[]', '[]'], ['--', 'admin', None, None, 26, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-10-27 23:21:09', 'lzg', '2021-10-29 07:26:28', 'vv', '', 'available', "[{'entity_id': 1, 'colour': '#805A9C', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': '33', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string'], ['name2', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'name2'], 'model': '', 'ds_address': '', 'alias': ''}, {'entity_id': 2, 'colour': '#8043CA', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': '36', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'ds_address': '', 'alias': ''}, {'entity_id': 3, 'colour': '#C4BA68', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': '37', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'ds_address': '', 'alias': ''}, {'entity_id': 4, 'colour': '#A46D24', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': '38', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'ds_address': ''}]", '[]', '[]', '[]'], ['--', 'admin', '--', 'admin', 27, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-10-28 02:03:33', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-10-28 02:07:44', '1111', '', 'available', "[{'entity_id': 1, 'colour': '#CDDC39', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contract', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['id', 'string'], ['number', 'string'], ['currency', 'string'], ['amount', 'string'], ['signDate', 'string'], ['accountName', 'string'], ['bank', 'string'], ['bankNumber', 'string'], ['taxRate', 'string'], ['taxAmount', 'string'], ['amountWithoutTax', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'id', 'number', 'currency', 'amount', 'signDate', 'accountName', 'bank', 'bankNumber', 'taxRate', 'taxAmount', 'amountWithoutTax'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '合同'}, {'entity_id': 2, 'colour': '#0288D1', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'company', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '公司或人'}, {'entity_id': 3, 'colour': '#374047', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'clause', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['content', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'content'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '条款'}]", "[{'edge_id': 1, 'colour': '#673AB8', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contain', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'contain', 'clause'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 2, 'colour': '#374047', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'ownerSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'ownerSubject', 'company'], 'ds_address': '', 'alias': '我方主体'}, {'edge_id': 3, 'colour': '#3E52B5', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'otherSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'otherSubject', 'company'], 'ds_address': '', 'alias': '对方主体'}]", '[]', '[]'], ['--', 'admin', '--', 'admin', 28, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-10-28 04:49:59', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-10-28 04:50:09', '200', '', 'available', "[{'entity_id': 1, 'colour': '#CDDC39', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contract', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['id', 'string'], ['number', 'string'], ['currency', 'string'], ['amount', 'string'], ['signDate', 'string'], ['accountName', 'string'], ['bank', 'string'], ['bankNumber', 'string'], ['taxRate', 'string'], ['taxAmount', 'string'], ['amountWithoutTax', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'id', 'number', 'currency', 'amount', 'signDate', 'accountName', 'bank', 'bankNumber', 'taxRate', 'taxAmount', 'amountWithoutTax'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '合同'}, {'entity_id': 2, 'colour': '#673AB8', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'company', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '公司或人'}, {'entity_id': 3, 'colour': '#9E9E9E', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'clause', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['content', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'content'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '条款'}]", "[{'edge_id': 1, 'colour': '#673AB8', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contain', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'contain', 'clause'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 2, 'colour': '#795648', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'ownerSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'ownerSubject', 'company'], 'ds_address': '', 'alias': '我方主体'}, {'edge_id': 3, 'colour': '#ED679F', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'otherSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'otherSubject', 'company'], 'ds_address': '', 'alias': '对方主体'}]", '[]', '[]'], ['--', 'admin', '--', 'admin', 29, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-10-28 05:01:00', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-10-28 05:01:00', '300', '', 'pending', '[]', '[]', '[]', '[]'], ['--', 'admin', '--', 'admin', 30, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-10-28 05:05:21', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-10-28 05:05:21', 'dada', '', 'pending', '[]', '[]', '[]', '[]'], ['--', 'admin', '--', 'admin', 33, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-10-28 05:14:09', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-10-28 05:14:09', 'wqwq', '', 'pending', '[]', '[]', '[]', '[]'], ['--', 'admin', '--', 'admin', 34, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-10-28 05:21:25', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-10-28 05:21:33', 'eqe', '', 'available', "[{'entity_id': 1, 'colour': '#019688', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contract', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['id', 'string'], ['number', 'string'], ['currency', 'string'], ['amount', 'string'], ['sign_date', 'string'], ['account_name', 'string'], ['bank', 'string'], ['bank_number', 'string'], ['tax_rate', 'string'], ['tax_amount', 'string'], ['amount_without_tax', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'id', 'number', 'currency', 'amount', 'sign_date', 'account_name', 'bank', 'bank_number', 'tax_rate', 'tax_amount', 'amount_without_tax'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '合同'}, {'entity_id': 2, 'colour': '#019688', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'company', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '公司或人'}, {'entity_id': 3, 'colour': '#FFC106', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'clause', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['content', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'content'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '条款'}]", "[{'edge_id': 1, 'colour': '#B31ACC', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contain', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'contain', 'clause'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 2, 'colour': '#673AB8', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'ownerSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'ownerSubject', 'company'], 'ds_address': '', 'alias': '我方主体'}, {'edge_id': 3, 'colour': '#374047', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'otherSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'otherSubject', 'company'], 'ds_address': '', 'alias': '对方主体'}]", '[]', '[]'], ['--', 'admin', '--', 'admin', 35, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-10-28 23:42:58', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-10-29 01:45:21', '11111', '', 'available', "[{'entity_id': 1, 'colour': '#F44336', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contract', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['id', 'string'], ['number', 'string'], ['currency', 'string'], ['amount', 'string'], ['sign_date', 'string'], ['account_name', 'string'], ['bank', 'string'], ['bank_number', 'string'], ['tax_rate', 'string'], ['tax_amount', 'string'], ['amount_without_tax', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'id', 'number', 'currency', 'amount', 'sign_date', 'account_name', 'bank', 'bank_number', 'tax_rate', 'tax_amount', 'amount_without_tax'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '合同'}, {'entity_id': 2, 'colour': '#354675', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'company', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '公司或人'}, {'entity_id': 3, 'colour': '#E91F64', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'clause', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['content', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'content'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '条款'}]", "[{'edge_id': 1, 'colour': '#CDDC39', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contain', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'contain', 'clause'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 2, 'colour': '#45639C', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'ownerSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'ownerSubject', 'company'], 'ds_address': '', 'alias': '我方主体'}, {'edge_id': 3, 'colour': '#45639C', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'otherSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'otherSubject', 'company'], 'ds_address': '', 'alias': '对方主体'}]", '[]', '[]']]
        ret_43row = [['--', 'admin', '--', 'admin', 80, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-16 20:43:39', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-16 20:43:39', 'benti2', '', 'pending', '[]', '[]', '[]', '[]'], ['--', 'admin', '--', 'admin', 79, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-16 03:54:10', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-16 03:54:10', 'benti1', '', 'pending', '[]', '[]', '[]', '[]'], ['--', 'admin', '--', 'admin', 78, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-16 03:36:20', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-16 03:36:20', 'brnti', '', 'pending', '[]', '[]', '[]', '[]'], ['--', 'admin', '--', 'admin', 77, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-16 03:32:19', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-16 03:32:19', 'benti', '', 'pending', '[]', '[]', '[]', '[]'], ['--', 'admin', '--', 'admin', 76, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-15 21:39:06', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-15 21:39:06', '23213213', '', 'pending', '[]', '[]', '[]', '[]'], ['--', 'admin', '--', 'admin', 75, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-15 21:35:18', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-15 21:41:37', 'ewqeqewqewq', '', 'available', "[{'entity_id': 1, 'colour': '#5C539B', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'A', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'ds_address': '', 'alias': ''}, {'entity_id': 2, 'colour': '#E39640', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'B', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'ds_address': '', 'alias': ''}]", "[{'edge_id': 1, 'colour': '#5C539B', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_id': '', 'extract_type': '', 'name': 'A_2_B', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'relations': ['A', 'A_2_B', 'B'], 'ds_address': '', 'alias': ''}]", '[]', '[]'], ['--', 'admin', '--', 'admin', 74, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-15 04:09:03', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-15 04:16:00', 'eqwe', '', 'available', "[{'entity_id': 1, 'colour': '#5C539B', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': '22', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'ds_address': '', 'alias': ''}]", '[]', '[]', '[]'], ['--', 'admin', '--', 'admin', 73, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-15 03:23:38', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-15 03:23:49', '00000', '', 'available', "[{'entity_id': 1, 'colour': '#607D8B', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contract', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['id', 'string'], ['number', 'string'], ['currency', 'string'], ['amount', 'string'], ['sign_date', 'string'], ['account_name', 'string'], ['bank', 'string'], ['bank_number', 'string'], ['tax_rate', 'string'], ['tax_amount', 'string'], ['amount_without_tax', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'id', 'number', 'currency', 'amount', 'sign_date', 'account_name', 'bank', 'bank_number', 'tax_rate', 'tax_amount', 'amount_without_tax'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '合同'}, {'entity_id': 2, 'colour': '#B31ACC', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'company', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '公司或人'}, {'entity_id': 3, 'colour': '#00BDD4', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'clause', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['content', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'content'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '条款'}]", "[{'edge_id': 1, 'colour': '#E91F64', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contain', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'contain', 'clause'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 2, 'colour': '#00BDD4', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'ownerSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'ownerSubject', 'company'], 'ds_address': '', 'alias': '我方主体'}, {'edge_id': 3, 'colour': '#8BC34A', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'otherSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'otherSubject', 'company'], 'ds_address': '', 'alias': '对方主体'}]", '[]', '[]'], ['--', 'admin', '--', 'admin', 72, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-15 03:17:13', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-15 03:17:46', '23213233', '', 'available', "[{'entity_id': 1, 'colour': '#374047', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contract', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['id', 'string'], ['number', 'string'], ['currency', 'string'], ['amount', 'string'], ['sign_date', 'string'], ['account_name', 'string'], ['bank', 'string'], ['bank_number', 'string'], ['tax_rate', 'string'], ['tax_amount', 'string'], ['amount_without_tax', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'id', 'number', 'currency', 'amount', 'sign_date', 'account_name', 'bank', 'bank_number', 'tax_rate', 'tax_amount', 'amount_without_tax'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '合同'}, {'entity_id': 2, 'colour': '#354675', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'company', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '公司或人'}, {'entity_id': 3, 'colour': '#9E9E9E', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'clause', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['content', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'content'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '条款'}]", "[{'edge_id': 1, 'colour': '#8BC34A', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contain', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'contain', 'clause'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 2, 'colour': '#019688', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'ownerSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'ownerSubject', 'company'], 'ds_address': '', 'alias': '我方主体'}, {'edge_id': 3, 'colour': '#E91F64', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'otherSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'otherSubject', 'company'], 'ds_address': '', 'alias': '对方主体'}]", '[]', '[]'], ['--', 'admin', '--', 'admin', 71, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-15 02:42:30', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-15 02:42:30', '545454', '', 'pending', '[]', '[]', '[]', '[]'], ['--', 'admin', '--', 'admin', 70, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-15 02:41:15', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-15 02:41:27', 'sddds', '', 'available', "[{'entity_id': 1, 'colour': '#9E9E9E', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contract', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['id', 'string'], ['number', 'string'], ['currency', 'string'], ['amount', 'string'], ['sign_date', 'string'], ['account_name', 'string'], ['bank', 'string'], ['bank_number', 'string'], ['tax_rate', 'string'], ['tax_amount', 'string'], ['amount_without_tax', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'id', 'number', 'currency', 'amount', 'sign_date', 'account_name', 'bank', 'bank_number', 'tax_rate', 'tax_amount', 'amount_without_tax'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '合同'}, {'entity_id': 2, 'colour': '#ED679F', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'company', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '公司或人'}, {'entity_id': 3, 'colour': '#FFC106', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'clause', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['content', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'content'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '条款'}]", "[{'edge_id': 1, 'colour': '#673AB8', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contain', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'contain', 'clause'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 2, 'colour': '#9E9E9E', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'ownerSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'ownerSubject', 'company'], 'ds_address': '', 'alias': '我方主体'}, {'edge_id': 3, 'colour': '#F44336', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'otherSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'otherSubject', 'company'], 'ds_address': '', 'alias': '对方主体'}]", '[]', '[]'], ['--', 'admin', '--', 'admin', 69, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-15 02:34:36', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-15 02:35:20', 'ces', '', 'available', "[{'entity_id': 1, 'colour': '#FFC106', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contract', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['id', 'string'], ['number', 'string'], ['currency', 'string'], ['amount', 'string'], ['sign_date', 'string'], ['account_name', 'string'], ['bank', 'string'], ['bank_number', 'string'], ['tax_rate', 'string'], ['tax_amount', 'string'], ['amount_without_tax', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'id', 'number', 'currency', 'amount', 'sign_date', 'account_name', 'bank', 'bank_number', 'tax_rate', 'tax_amount', 'amount_without_tax'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '合同'}, {'entity_id': 2, 'colour': '#FF9800', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'company', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '公司或人'}, {'entity_id': 3, 'colour': '#019688', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'clause', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['content', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'content'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '条款'}]", "[{'edge_id': 1, 'colour': '#00BDD4', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contain', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'contain', 'clause'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 2, 'colour': '#354675', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'ownerSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'ownerSubject', 'company'], 'ds_address': '', 'alias': '我方主体'}, {'edge_id': 3, 'colour': '#448AFF', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'otherSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'otherSubject', 'company'], 'ds_address': '', 'alias': '对方主体'}]", '[]', '[]'], ['--', 'admin', '--', 'admin', 68, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-15 02:25:22', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-15 02:54:01', 'ewqeq', '', 'available', "[{'entity_id': 1, 'colour': '#9E9E9E', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'person', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'AImodel', 'ds_address': '', 'alias': '人'}, {'entity_id': 2, 'colour': '#448AFF', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'enterprise', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['financing', 'string'], ['financing_amount', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'financing', 'financing_amount'], 'model': 'AImodel', 'ds_address': '', 'alias': '公司'}, {'entity_id': 3, 'colour': '#ED679F', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'job_title', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'AImodel', 'ds_address': '', 'alias': '职位名称'}, {'entity_id': 4, 'colour': '#ED679F', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'production', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['publish_date', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'publish_date'], 'model': 'AImodel', 'ds_address': '', 'alias': '产品'}, {'entity_id': 5, 'colour': '#CDDC39', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'lead_investor', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'AImodel', 'ds_address': '', 'alias': '领投方'}, {'entity_id': 6, 'colour': '#3E52B5', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'acquirer', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'AImodel', 'ds_address': '', 'alias': '收购者'}, {'entity_id': 7, 'colour': '#607D8B', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'algorithm_proposer', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'AImodel', 'ds_address': '', 'alias': '作者'}, {'entity_id': 8, 'colour': '#374047', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'algorithm', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'AImodel', 'ds_address': '', 'alias': '算法'}, {'entity_id': 9, 'colour': '#F44336', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'paper', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['journal', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'journal'], 'model': 'AImodel', 'ds_address': '', 'alias': '论文'}, {'entity_id': 10, 'colour': '#795648', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'conference', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['datetime', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'datetime'], 'model': 'AImodel', 'ds_address': '', 'alias': '会议'}, {'entity_id': 11, 'colour': '#673AB8', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'location', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'AImodel', 'ds_address': '', 'alias': '地点'}]", "[{'edge_id': 1, 'colour': '#F44336', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'work_on', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'AImodel', 'relations': ['person', 'work_on', 'enterprise'], 'ds_address': '', 'alias': '工作单位'}, {'edge_id': 2, 'colour': '#45639C', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'position', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'AImodel', 'relations': ['person', 'position', 'job_title'], 'ds_address': '', 'alias': '职位'}, {'edge_id': 3, 'colour': '#FFC106', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'develop', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'AImodel', 'relations': ['enterprise', 'develop', 'production'], 'ds_address': '', 'alias': '开发'}, {'edge_id': 4, 'colour': '#F44336', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'invest', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'AImodel', 'relations': ['enterprise', 'invest', 'enterprise'], 'ds_address': '', 'alias': '投资'}, {'edge_id': 5, 'colour': '#9E9E9E', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'lead', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'AImodel', 'relations': ['lead_investor', 'lead', 'enterprise'], 'ds_address': '', 'alias': '领投'}, {'edge_id': 6, 'colour': '#FF9800', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'take_over', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'AImodel', 'relations': ['acquirer', 'take_over', 'enterprise'], 'ds_address': '', 'alias': '收购'}, {'edge_id': 7, 'colour': '#448AFF', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'present', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'AImodel', 'relations': ['algorithm_proposer', 'present', 'algorithm'], 'ds_address': '', 'alias': '提出'}, {'edge_id': 8, 'colour': '#354675', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'publish', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'AImodel', 'relations': ['person', 'publish', 'paper'], 'ds_address': '', 'alias': '发表'}, {'edge_id': 9, 'colour': '#3E52B5', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'purchased_by', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'AImodel', 'relations': ['enterprise', 'purchased_by', 'enterprise'], 'ds_address': '', 'alias': '被收购'}, {'edge_id': 10, 'colour': '#45639C', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'venue', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'AImodel', 'relations': ['conference', 'venue', 'location'], 'ds_address': '', 'alias': '举行地点'}, {'edge_id': 11, 'colour': '#E91F64', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'hold', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'AImodel', 'relations': ['enterprise', 'hold', 'conference'], 'ds_address': '', 'alias': '举办'}]", '[]', '[]'], ['--', 'admin', '--', 'admin', 67, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-14 21:43:33', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-14 21:43:40', 'wqe', '', 'available', "[{'entity_id': 1, 'colour': '#C64F58', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'weq', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'ds_address': '', 'alias': ''}]", '[]', '[]', '[]'], ['--', 'admin', '--', 'admin', 66, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-11 22:39:04', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-11 22:41:27', '4324', '', 'available', "[{'entity_id': 1, 'colour': '#8BC34A', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'folder', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['path', 'string'], ['gns', 'string'], ['create_time', 'string'], ['rev', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'path', 'gns', 'create_time', 'rev'], 'model': 'Anysharedocumentmodel', 'ds_address': '', 'alias': '目录'}, {'entity_id': 2, 'colour': '#B31ACC', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'document', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['path', 'string'], ['creator', 'string'], ['create_time', 'string'], ['editor', 'string'], ['gns', 'string'], ['file_type', 'string'], ['modified_time', 'string'], ['rev', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'path', 'creator', 'create_time', 'editor', 'gns', 'file_type', 'modified_time', 'rev'], 'model': 'Anysharedocumentmodel', 'ds_address': '', 'alias': '文档'}, {'entity_id': 3, 'colour': '#8BC34A', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'chapter', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['path', 'string'], ['level', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'path', 'level'], 'model': 'Anysharedocumentmodel', 'ds_address': '', 'alias': '章节'}, {'entity_id': 5, 'colour': '#00BDD4', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'label', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['confidence', 'float'], ['adlabel_kcid', 'string'], ['kc_topic_tags', 'string'], ['type_as', 'boolean'], ['type_sa', 'boolean'], ['type_nw', 'boolean'], ['type_kc', 'boolean']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'confidence', 'adlabel_kcid', 'kc_topic_tags', 'type_as', 'type_sa', 'type_nw', 'type_kc'], 'model': 'Anysharedocumentmodel', 'ds_address': '', 'alias': '标签'}]", "[{'edge_id': 3, 'colour': '#3E52B5', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'folder2folder', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Anysharedocumentmodel', 'relations': ['folder', 'folder2folder', 'folder'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 4, 'colour': '#607D8B', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'folder2document', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Anysharedocumentmodel', 'relations': ['folder', 'folder2document', 'document'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 5, 'colour': '#ED679F', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'document2chapter', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Anysharedocumentmodel', 'relations': ['document', 'document2chapter', 'chapter'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 9, 'colour': '#673AB8', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'label2label', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['weight', 'float']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'weight'], 'model': 'Anysharedocumentmodel', 'relations': ['label', 'label2label', 'label'], 'ds_address': '', 'alias': '关联'}, {'edge_id': 10, 'colour': '#448AFF', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'label2document', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['weight', 'float']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'weight'], 'model': 'Anysharedocumentmodel', 'relations': ['label', 'label2document', 'document'], 'ds_address': '', 'alias': '出现于'}]", '[]', '[]'], ['--', 'admin', '--', 'admin', 65, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-10 03:42:46', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-10 03:42:46', '444', '', 'pending', '[]', '[]', '[]', '[]'], ['--', 'admin', '--', 'admin', 64, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-09 02:21:05', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-09 02:23:20', '本体', '', 'available', "[{'entity_id': 1, 'colour': '#45639C', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'folder', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string'], ['path', 'string'], ['gns', 'string'], ['create_time', 'string'], ['rev', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'path', 'gns', 'create_time', 'rev'], 'model': '', 'ds_address': '', 'alias': '目录'}, {'entity_id': 2, 'colour': '#FF9800', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'document', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string'], ['path', 'string'], ['creator', 'string'], ['create_time', 'string'], ['editor', 'string'], ['gns', 'string'], ['file_type', 'string'], ['modified_time', 'string'], ['rev', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'path', 'creator', 'create_time', 'editor', 'gns', 'file_type', 'modified_time', 'rev'], 'model': '', 'ds_address': '', 'alias': '文档'}, {'entity_id': 3, 'colour': '#0288D1', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'chapter', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string'], ['path', 'string'], ['level', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'path', 'level'], 'model': '', 'ds_address': '', 'alias': '章节'}, {'entity_id': 4, 'colour': '#CDDC39', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'text', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'ds_address': '', 'alias': '正文'}, {'entity_id': 5, 'colour': '#354675', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'label', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string'], ['confidence', 'float'], ['adlabel_kcid', 'string'], ['kc_topic_tags', 'string'], ['type_as', 'boolean'], ['type_sa', 'boolean'], ['type_nw', 'boolean'], ['type_kc', 'boolean']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'confidence', 'adlabel_kcid', 'kc_topic_tags', 'type_as', 'type_sa', 'type_nw', 'type_kc'], 'model': '', 'ds_address': '', 'alias': '标签'}, {'entity_id': 6, 'colour': '#E91F64', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'desc', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'ds_address': '', 'alias': '解释'}, {'entity_id': 7, 'colour': '#45639C', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contract', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string'], ['id', 'string'], ['number', 'string'], ['currency', 'string'], ['amount', 'string'], ['sign_date', 'string'], ['account_name', 'string'], ['bank', 'string'], ['bank_number', 'string'], ['tax_rate', 'string'], ['tax_amount', 'string'], ['amount_without_tax', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'id', 'number', 'currency', 'amount', 'sign_date', 'account_name', 'bank', 'bank_number', 'tax_rate', 'tax_amount', 'amount_without_tax'], 'model': '', 'ds_address': '', 'alias': '合同'}, {'entity_id': 8, 'colour': '#448AFF', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'company', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'ds_address': '', 'alias': '公司或人'}, {'entity_id': 9, 'colour': '#45639C', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'clause', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string'], ['content', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'content'], 'model': '', 'ds_address': '', 'alias': '条款'}]", "[{'edge_id': 1, 'colour': '#0288D1', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'desc2document', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'relations': ['desc', 'desc2document', 'document'], 'ds_address': '', 'alias': '出现于'}, {'edge_id': 2, 'colour': '#CDDC39', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'desc2label', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string'], ['weight', 'float']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'weight'], 'model': '', 'relations': ['desc', 'desc2label', 'label'], 'ds_address': '', 'alias': '解释是'}, {'edge_id': 3, 'colour': '#F44336', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'folder2folder', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'relations': ['folder', 'folder2folder', 'folder'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 4, 'colour': '#374047', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'folder2document', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'relations': ['folder', 'folder2document', 'document'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 5, 'colour': '#B31ACC', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'document2chapter', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'relations': ['document', 'document2chapter', 'chapter'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 6, 'colour': '#354675', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'document2text', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'relations': ['document', 'document2text', 'text'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 7, 'colour': '#374047', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'text2text', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'relations': ['text', 'text2text', 'text'], 'ds_address': '', 'alias': 'A相关B'}, {'edge_id': 8, 'colour': '#B31ACC', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'chapter2text', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'relations': ['chapter', 'chapter2text', 'text'], 'ds_address': '', 'alias': '内容是'}, {'edge_id': 9, 'colour': '#673AB8', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'label2label', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string'], ['weight', 'float']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'weight'], 'model': '', 'relations': ['label', 'label2label', 'label'], 'ds_address': '', 'alias': '关联'}, {'edge_id': 10, 'colour': '#019688', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'label2document', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string'], ['weight', 'float']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'weight'], 'model': '', 'relations': ['label', 'label2document', 'document'], 'ds_address': '', 'alias': '出现于'}, {'edge_id': 11, 'colour': '#3E52B5', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contain', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'relations': ['contract', 'contain', 'clause'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 12, 'colour': '#E91F64', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'ownerSubject', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'relations': ['contract', 'ownerSubject', 'company'], 'ds_address': '', 'alias': '我方主体'}, {'edge_id': 13, 'colour': '#0288D1', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'otherSubject', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'relations': ['contract', 'otherSubject', 'company'], 'ds_address': '', 'alias': '对方主体'}]", '[]', '[]'], ['--', 'admin', '--', 'admin', 63, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-07 21:15:19', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-07 21:15:29', 'EWQ', '', 'available', "[{'entity_id': 1, 'colour': '#45639C', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'folder', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['path', 'string'], ['gns', 'string'], ['create_time', 'string'], ['rev', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'path', 'gns', 'create_time', 'rev'], 'model': 'Anysharedocumentmodel', 'ds_address': '', 'alias': '目录'}, {'entity_id': 2, 'colour': '#FF9800', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'document', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['path', 'string'], ['creator', 'string'], ['create_time', 'string'], ['editor', 'string'], ['gns', 'string'], ['file_type', 'string'], ['modified_time', 'string'], ['rev', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'path', 'creator', 'create_time', 'editor', 'gns', 'file_type', 'modified_time', 'rev'], 'model': 'Anysharedocumentmodel', 'ds_address': '', 'alias': '文档'}, {'entity_id': 3, 'colour': '#0288D1', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'chapter', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['path', 'string'], ['level', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'path', 'level'], 'model': 'Anysharedocumentmodel', 'ds_address': '', 'alias': '章节'}, {'entity_id': 4, 'colour': '#CDDC39', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'text', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Anysharedocumentmodel', 'ds_address': '', 'alias': '正文'}, {'entity_id': 5, 'colour': '#354675', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'label', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['confidence', 'float'], ['adlabel_kcid', 'string'], ['kc_topic_tags', 'string'], ['type_as', 'boolean'], ['type_sa', 'boolean'], ['type_nw', 'boolean'], ['type_kc', 'boolean']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'confidence', 'adlabel_kcid', 'kc_topic_tags', 'type_as', 'type_sa', 'type_nw', 'type_kc'], 'model': 'Anysharedocumentmodel', 'ds_address': '', 'alias': '标签'}, {'entity_id': 6, 'colour': '#E91F64', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'desc', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Anysharedocumentmodel', 'ds_address': '', 'alias': '解释'}]", "[{'edge_id': 1, 'colour': '#0288D1', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'desc2document', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Anysharedocumentmodel', 'relations': ['desc', 'desc2document', 'document'], 'ds_address': '', 'alias': '出现于'}, {'edge_id': 2, 'colour': '#CDDC39', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'desc2label', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['weight', 'float']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'weight'], 'model': 'Anysharedocumentmodel', 'relations': ['desc', 'desc2label', 'label'], 'ds_address': '', 'alias': '解释是'}, {'edge_id': 3, 'colour': '#F44336', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'folder2folder', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Anysharedocumentmodel', 'relations': ['folder', 'folder2folder', 'folder'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 4, 'colour': '#374047', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'folder2document', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Anysharedocumentmodel', 'relations': ['folder', 'folder2document', 'document'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 5, 'colour': '#B31ACC', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'document2chapter', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Anysharedocumentmodel', 'relations': ['document', 'document2chapter', 'chapter'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 6, 'colour': '#354675', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'document2text', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Anysharedocumentmodel', 'relations': ['document', 'document2text', 'text'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 7, 'colour': '#374047', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'text2text', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Anysharedocumentmodel', 'relations': ['text', 'text2text', 'text'], 'ds_address': '', 'alias': 'A相关B'}, {'edge_id': 8, 'colour': '#B31ACC', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'chapter2text', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Anysharedocumentmodel', 'relations': ['chapter', 'chapter2text', 'text'], 'ds_address': '', 'alias': '内容是'}, {'edge_id': 9, 'colour': '#673AB8', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'label2label', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['weight', 'float']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'weight'], 'model': 'Anysharedocumentmodel', 'relations': ['label', 'label2label', 'label'], 'ds_address': '', 'alias': '关联'}, {'edge_id': 10, 'colour': '#019688', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'label2document', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['weight', 'float']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'weight'], 'model': 'Anysharedocumentmodel', 'relations': ['label', 'label2document', 'document'], 'ds_address': '', 'alias': '出现于'}]", '[]', '[]'], ['--', 'admin', '--', 'admin', 62, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-03 03:28:34', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-15 02:36:35', 'nocontract', '', 'available', "[{'entity_id': 1, 'colour': '#45639C', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contract', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['id', 'string'], ['number', 'string'], ['currency', 'string'], ['amount', 'string'], ['sign_date', 'string'], ['account_name', 'string'], ['bank', 'string'], ['bank_number', 'string'], ['tax_rate', 'string'], ['tax_amount', 'string'], ['amount_without_tax', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'id', 'number', 'currency', 'amount', 'sign_date', 'account_name', 'bank', 'bank_number', 'tax_rate', 'tax_amount', 'amount_without_tax'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '合同'}, {'entity_id': 2, 'colour': '#448AFF', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'company', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '公司或人'}, {'entity_id': 3, 'colour': '#45639C', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'clause', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['content', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'content'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '条款'}]", "[{'edge_id': 1, 'colour': '#3E52B5', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contain', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'contain', 'clause'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 2, 'colour': '#E91F64', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'ownerSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'ownerSubject', 'company'], 'ds_address': '', 'alias': '我方主体'}, {'edge_id': 3, 'colour': '#0288D1', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'otherSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'otherSubject', 'company'], 'ds_address': '', 'alias': '对方主体'}]", '[]', '[]'], ['--', 'admin', '--', 'admin', 61, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-03 02:44:45', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-03 02:45:40', 'rewr', 'rewr', 'available', "[{'entity_id': 1, 'colour': '#D9704C', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'qqwwww', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'ds_address': '', 'alias': ''}]", '[]', '[]', '[]'], ['--', 'admin', '--', 'admin', 60, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-03 02:36:25', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-03 02:43:39', 'ewwqeqeqw', '', 'available', "[{'entity_id': 1, 'colour': '#448AFF', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'folder', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Anysharedocumentmodel', 'ds_address': '', 'alias': '目录'}, {'entity_id': 2, 'colour': '#FFC106', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'document', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['path', 'string'], ['creator', 'string'], ['create_time', 'string'], ['editor', 'string'], ['gns', 'string'], ['file_type', 'string'], ['modified_time', 'string'], ['rev', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'path', 'creator', 'create_time', 'editor', 'gns', 'file_type', 'modified_time', 'rev'], 'model': 'Anysharedocumentmodel', 'ds_address': '', 'alias': '文档'}, {'entity_id': 5, 'colour': '#FF9800', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'label', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['confidence', 'float'], ['adlabel_kcid', 'string'], ['kc_topic_tags', 'string'], ['type_as', 'boolean'], ['type_sa', 'boolean'], ['type_nw', 'boolean'], ['type_kc', 'boolean']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'confidence', 'adlabel_kcid', 'kc_topic_tags', 'type_as', 'type_sa', 'type_nw', 'type_kc'], 'model': 'Anysharedocumentmodel', 'ds_address': '', 'alias': '标签'}, {'entity_id': 6, 'colour': '#ED679F', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'desc', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Anysharedocumentmodel', 'ds_address': '', 'alias': '解释'}]", "[{'edge_id': 1, 'colour': '#FFC106', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'desc2document', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Anysharedocumentmodel', 'relations': ['desc', 'desc2document', 'document'], 'ds_address': '', 'alias': '出现于'}, {'edge_id': 2, 'colour': '#448AFF', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'desc2label', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['weight', 'float']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'weight'], 'model': 'Anysharedocumentmodel', 'relations': ['desc', 'desc2label', 'label'], 'ds_address': '', 'alias': '解释是'}, {'edge_id': 3, 'colour': '#ED679F', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'folder2folder', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Anysharedocumentmodel', 'relations': ['folder', 'folder2folder', 'folder'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 4, 'colour': '#F44336', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'folder2document', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Anysharedocumentmodel', 'relations': ['folder', 'folder2document', 'document'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 9, 'colour': '#ED679F', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'label2label', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['weight', 'float']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'weight'], 'model': 'Anysharedocumentmodel', 'relations': ['label', 'label2label', 'label'], 'ds_address': '', 'alias': '关联'}, {'edge_id': 10, 'colour': '#374047', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'label2document', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['weight', 'float']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'weight'], 'model': 'Anysharedocumentmodel', 'relations': ['label', 'label2document', 'document'], 'ds_address': '', 'alias': '出现于'}]", '[]', '[]'], ['--', 'admin', '--', 'admin', 59, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-03 02:17:56', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-03 02:17:56', 'test', '', 'pending', '[]', '[]', '[]', '[]'], [None, None, None, None, 58, '0242ac190002', '2021-11-01 11:10:50', '0242ac190002', '2021-11-01 11:10:50', '3', '11', 'available', "[{'entity_id': 1, 'colour': '#B31ACC', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contract', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['id', 'string'], ['number', 'string'], ['currency', 'string'], ['amount', 'string'], ['sign_date', 'string'], ['account_name', 'string'], ['bank', 'string'], ['bank_number', 'string'], ['tax_rate', 'string'], ['tax_amount', 'string'], ['amount_without_tax', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'id', 'number', 'currency', 'amount', 'sign_date', 'account_name', 'bank', 'bank_number', 'tax_rate', 'tax_amount', 'amount_without_tax'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '合同'}, {'entity_id': 2, 'colour': '#0288D1', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'company', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '公司或人'}, {'entity_id': 3, 'colour': '#FFC106', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'clause', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['content', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'content'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '条款'}]", "[{'edge_id': 1, 'colour': '#F44336', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contain', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'contain', 'clause'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 2, 'colour': '#CDDC39', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'ownerSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'ownerSubject', 'company'], 'ds_address': '', 'alias': '我方主体'}, {'edge_id': 3, 'colour': '#B31ACC', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'otherSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'otherSubject', 'company'], 'ds_address': '', 'alias': '对方主体'}]", '[]', '[]'], [None, None, None, None, 57, '0242ac190002', '2021-11-01 11:07:36', '0242ac190002', '2021-11-01 11:07:36', '2', '一二三四五六七八九十一二三四五六七八九十一二三四五六七八九十一二三四五六七八九十一二三四五六七八九十一二三四五六七八九十一二三四五六七八九十一二三四五六七八九十一二三四五六七八九十一二三四五六七八九十一二三四五六七八九十一二三四五六七八九十一二三四五六七八九十一二三四五六七八九十一二三四五六七八九十', 'available', "[{'entity_id': 1, 'colour': '#B31ACC', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contract', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['id', 'string'], ['number', 'string'], ['currency', 'string'], ['amount', 'string'], ['sign_date', 'string'], ['account_name', 'string'], ['bank', 'string'], ['bank_number', 'string'], ['tax_rate', 'string'], ['tax_amount', 'string'], ['amount_without_tax', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'id', 'number', 'currency', 'amount', 'sign_date', 'account_name', 'bank', 'bank_number', 'tax_rate', 'tax_amount', 'amount_without_tax'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '合同'}, {'entity_id': 2, 'colour': '#0288D1', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'company', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '公司或人'}, {'entity_id': 3, 'colour': '#FFC106', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'clause', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['content', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'content'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '条款'}]", "[{'edge_id': 1, 'colour': '#F44336', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contain', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'contain', 'clause'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 2, 'colour': '#CDDC39', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'ownerSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'ownerSubject', 'company'], 'ds_address': '', 'alias': '我方主体'}, {'edge_id': 3, 'colour': '#B31ACC', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'otherSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'otherSubject', 'company'], 'ds_address': '', 'alias': '对方主体'}]", '[]', '[]'], [None, None, None, None, 56, '0242ac190002', '2021-11-01 11:07:08', '0242ac190002', '2021-11-01 11:07:08', '1', '123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890', 'available', "[{'entity_id': 1, 'colour': '#B31ACC', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contract', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['id', 'string'], ['number', 'string'], ['currency', 'string'], ['amount', 'string'], ['sign_date', 'string'], ['account_name', 'string'], ['bank', 'string'], ['bank_number', 'string'], ['tax_rate', 'string'], ['tax_amount', 'string'], ['amount_without_tax', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'id', 'number', 'currency', 'amount', 'sign_date', 'account_name', 'bank', 'bank_number', 'tax_rate', 'tax_amount', 'amount_without_tax'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '合同'}, {'entity_id': 2, 'colour': '#0288D1', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'company', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '公司或人'}, {'entity_id': 3, 'colour': '#FFC106', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'clause', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['content', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'content'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '条款'}]", "[{'edge_id': 1, 'colour': '#F44336', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contain', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'contain', 'clause'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 2, 'colour': '#CDDC39', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'ownerSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'ownerSubject', 'company'], 'ds_address': '', 'alias': '我方主体'}, {'edge_id': 3, 'colour': '#B31ACC', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'otherSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'otherSubject', 'company'], 'ds_address': '', 'alias': '对方主体'}]", '[]', '[]'], [None, None, None, None, 55, '0242ac190002', '2021-11-01 11:05:22', '0242ac190002', '2021-11-01 11:05:22', '一二三四五六七八九十一二三四五六七八九十一二三四五六七八九十一二三四五六七八九十一二三四五六七八九十', 'dd', 'available', "[{'entity_id': 1, 'colour': '#B31ACC', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contract', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['id', 'string'], ['number', 'string'], ['currency', 'string'], ['amount', 'string'], ['sign_date', 'string'], ['account_name', 'string'], ['bank', 'string'], ['bank_number', 'string'], ['tax_rate', 'string'], ['tax_amount', 'string'], ['amount_without_tax', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'id', 'number', 'currency', 'amount', 'sign_date', 'account_name', 'bank', 'bank_number', 'tax_rate', 'tax_amount', 'amount_without_tax'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '合同'}, {'entity_id': 2, 'colour': '#0288D1', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'company', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '公司或人'}, {'entity_id': 3, 'colour': '#FFC106', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'clause', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['content', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'content'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '条款'}]", "[{'edge_id': 1, 'colour': '#F44336', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contain', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'contain', 'clause'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 2, 'colour': '#CDDC39', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'ownerSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'ownerSubject', 'company'], 'ds_address': '', 'alias': '我方主体'}, {'edge_id': 3, 'colour': '#B31ACC', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'otherSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'otherSubject', 'company'], 'ds_address': '', 'alias': '对方主体'}]", '[]', '[]'], [None, None, None, None, 54, '0242ac190002', '2021-11-01 11:04:55', '0242ac190002', '2021-11-01 11:04:55', '12345678901234567890123456789012345678901234567890', 'dd', 'available', "[{'entity_id': 1, 'colour': '#B31ACC', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contract', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['id', 'string'], ['number', 'string'], ['currency', 'string'], ['amount', 'string'], ['sign_date', 'string'], ['account_name', 'string'], ['bank', 'string'], ['bank_number', 'string'], ['tax_rate', 'string'], ['tax_amount', 'string'], ['amount_without_tax', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'id', 'number', 'currency', 'amount', 'sign_date', 'account_name', 'bank', 'bank_number', 'tax_rate', 'tax_amount', 'amount_without_tax'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '合同'}, {'entity_id': 2, 'colour': '#0288D1', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'company', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '公司或人'}, {'entity_id': 3, 'colour': '#FFC106', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'clause', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['content', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'content'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '条款'}]", "[{'edge_id': 1, 'colour': '#F44336', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contain', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'contain', 'clause'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 2, 'colour': '#CDDC39', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'ownerSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'ownerSubject', 'company'], 'ds_address': '', 'alias': '我方主体'}, {'edge_id': 3, 'colour': '#B31ACC', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'otherSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'otherSubject', 'company'], 'ds_address': '', 'alias': '对方主体'}]", '[]', '[]'], [None, None, None, None, 51, '0242ac190002', '2021-11-01 09:58:38', '0242ac190002', '2021-11-01 09:58:38', 'name', '', 'pending', '[]', '[]', '[]', '[]'], [None, None, None, None, 52, 'admin', '2021-10-31 22:32:11', None, None, '00003的副本', '', 'available', "[{'entity_id': 1, 'colour': '#B31ACC', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contract', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string'], ['id', 'string'], ['number', 'string'], ['currency', 'string'], ['amount', 'string'], ['sign_date', 'string'], ['account_name', 'string'], ['bank', 'string'], ['bank_number', 'string'], ['tax_rate', 'string'], ['tax_amount', 'string'], ['amount_without_tax', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'id', 'number', 'currency', 'amount', 'sign_date', 'account_name', 'bank', 'bank_number', 'tax_rate', 'tax_amount', 'amount_without_tax'], 'model': '', 'ds_address': '', 'alias': '合同'}, {'entity_id': 2, 'colour': '#0288D1', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'company', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'ds_address': '', 'alias': '公司或人'}, {'entity_id': 3, 'colour': '#FFC106', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'clause', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string'], ['content', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'content'], 'model': '', 'ds_address': '', 'alias': '条款'}]", "[{'edge_id': 1, 'colour': '#F44336', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contain', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'relations': ['contract', 'contain', 'clause'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 2, 'colour': '#CDDC39', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'ownerSubject', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'relations': ['contract', 'ownerSubject', 'company'], 'ds_address': '', 'alias': '我方主体'}, {'edge_id': 3, 'colour': '#B31ACC', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'otherSubject', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'relations': ['contract', 'otherSubject', 'company'], 'ds_address': '', 'alias': '对方主体'}]", '[]', '[]'], ['--', 'admin', '--', 'admin', 39, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-10-31 08:40:16', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-10-31 09:06:28', '00003', '', 'available', "[{'entity_id': 1, 'colour': '#B31ACC', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contract', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['id', 'string'], ['number', 'string'], ['currency', 'string'], ['amount', 'string'], ['sign_date', 'string'], ['account_name', 'string'], ['bank', 'string'], ['bank_number', 'string'], ['tax_rate', 'string'], ['tax_amount', 'string'], ['amount_without_tax', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'id', 'number', 'currency', 'amount', 'sign_date', 'account_name', 'bank', 'bank_number', 'tax_rate', 'tax_amount', 'amount_without_tax'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '合同'}, {'entity_id': 2, 'colour': '#0288D1', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'company', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '公司或人'}, {'entity_id': 3, 'colour': '#FFC106', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'clause', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['content', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'content'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '条款'}]", "[{'edge_id': 1, 'colour': '#F44336', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contain', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'contain', 'clause'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 2, 'colour': '#CDDC39', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'ownerSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'ownerSubject', 'company'], 'ds_address': '', 'alias': '我方主体'}, {'edge_id': 3, 'colour': '#B31ACC', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'otherSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'otherSubject', 'company'], 'ds_address': '', 'alias': '对方主体'}]", '[]', '[]'], ['--', 'admin', None, None, 38, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-10-30 02:06:11', 'lzg', '2021-11-11 03:09:26', 'lzgotl', '', 'available', "[{'entity_id': 1, 'colour': '#E39640', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': '1', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'ds_address': '', 'alias': 'bieming'}, {'entity_id': 2, 'colour': '#C1A9C6', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': '105', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string'], ['ded36', 'string'], ['ded367', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['ded36', 'ded367', 'name'], 'model': '', 'ds_address': '', 'alias': ''}, {'entity_id': 3, 'colour': '#F4BF0F', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': '106', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'ds_address': '', 'alias': ''}, {'entity_id': 4, 'colour': '#5CC5FD', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': '107', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'ds_address': '', 'alias': ''}, {'entity_id': 5, 'colour': '#4980B8', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': '108', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'ds_address': '', 'alias': ''}, {'entity_id': 6, 'colour': '#07BC92', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': '109', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'ds_address': '', 'alias': ''}, {'entity_id': 7, 'colour': '#0BC0CF', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': '101', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'ds_address': '', 'alias': ''}, {'entity_id': 8, 'colour': '#E726CF', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': '13', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'ds_address': '', 'alias': ''}, {'entity_id': 9, 'colour': '#9C4443', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': '15', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'ds_address': '', 'alias': ''}, {'entity_id': 10, 'colour': '#703149', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'e22', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'ds_address': '', 'alias': ''}]", "[{'edge_id': 1, 'colour': '#6CAF39', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_id': '', 'extract_type': '', 'name': 'xiugai', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'relations': ['1', 'xiugai', '106'], 'ds_address': '', 'alias': ''}, {'edge_id': 2, 'colour': '#F08C34', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_id': '', 'extract_type': '', 'name': '1_2_106', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'relations': ['1', '1_2_106', '106'], 'ds_address': '', 'alias': ''}, {'edge_id': 3, 'colour': '#04F291', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_id': '', 'extract_type': '', 'name': '106_2_123', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'relations': ['123', '106_2_123', '106'], 'ds_address': '', 'alias': ''}, {'edge_id': 4, 'colour': '#67D8FC', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_id': '', 'extract_type': '', 'name': '106_2_1234', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'relations': ['1234', '106_2_1234', '106'], 'ds_address': '', 'alias': ''}, {'edge_id': 5, 'colour': '#3C657C', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_id': '', 'extract_type': '', 'name': 'null', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'relations': ['1', 'null', '106'], 'ds_address': '', 'alias': ''}, {'edge_id': 6, 'colour': '#394194', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_id': '', 'extract_type': '', 'name': '44', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'relations': ['1', '44', '106'], 'ds_address': '', 'alias': ''}]", '[]', '[]'], ['--', 'admin', '--', 'admin', 37, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-10-29 03:47:33', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-10-31 21:02:26', '001', '', 'available', "[{'entity_id': 1, 'colour': '#FFC106', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contract', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['id', 'string'], ['number', 'string'], ['currency', 'string'], ['amount', 'string'], ['sign_date', 'string'], ['account_name', 'string'], ['bank', 'string'], ['bank_number', 'string'], ['tax_rate', 'string'], ['tax_amount', 'string'], ['amount_without_tax', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'id', 'number', 'currency', 'amount', 'sign_date', 'account_name', 'bank', 'bank_number', 'tax_rate', 'tax_amount', 'amount_without_tax'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '合同'}, {'entity_id': 2, 'colour': '#FF9800', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'company', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '公司或人'}, {'entity_id': 3, 'colour': '#795648', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'clause', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['content', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'content'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '条款'}]", "[{'edge_id': 1, 'colour': '#607D8B', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contain', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'contain', 'clause'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 2, 'colour': '#795648', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'ownerSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'ownerSubject', 'company'], 'ds_address': '', 'alias': '我方主体'}, {'edge_id': 3, 'colour': '#8BC34A', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'otherSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'otherSubject', 'company'], 'ds_address': '', 'alias': '对方主体'}]", '[]', '[]'], ['--', 'admin', None, None, 36, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-10-29 02:39:39', 'lzg', '2021-10-29 07:54:44', 'ww', '', 'pending', '[]', '[]', '[]', '[]'], ['--', 'admin', '--', 'admin', 35, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-10-28 23:42:58', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-10-29 01:45:21', '11111', '', 'available', "[{'entity_id': 1, 'colour': '#F44336', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contract', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['id', 'string'], ['number', 'string'], ['currency', 'string'], ['amount', 'string'], ['sign_date', 'string'], ['account_name', 'string'], ['bank', 'string'], ['bank_number', 'string'], ['tax_rate', 'string'], ['tax_amount', 'string'], ['amount_without_tax', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'id', 'number', 'currency', 'amount', 'sign_date', 'account_name', 'bank', 'bank_number', 'tax_rate', 'tax_amount', 'amount_without_tax'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '合同'}, {'entity_id': 2, 'colour': '#354675', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'company', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '公司或人'}, {'entity_id': 3, 'colour': '#E91F64', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'clause', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['content', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'content'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '条款'}]", "[{'edge_id': 1, 'colour': '#CDDC39', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contain', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'contain', 'clause'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 2, 'colour': '#45639C', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'ownerSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'ownerSubject', 'company'], 'ds_address': '', 'alias': '我方主体'}, {'edge_id': 3, 'colour': '#45639C', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'otherSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'otherSubject', 'company'], 'ds_address': '', 'alias': '对方主体'}]", '[]', '[]'], ['--', 'admin', '--', 'admin', 34, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-10-28 05:21:25', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-10-28 05:21:33', 'eqe', '', 'available', "[{'entity_id': 1, 'colour': '#019688', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contract', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['id', 'string'], ['number', 'string'], ['currency', 'string'], ['amount', 'string'], ['sign_date', 'string'], ['account_name', 'string'], ['bank', 'string'], ['bank_number', 'string'], ['tax_rate', 'string'], ['tax_amount', 'string'], ['amount_without_tax', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'id', 'number', 'currency', 'amount', 'sign_date', 'account_name', 'bank', 'bank_number', 'tax_rate', 'tax_amount', 'amount_without_tax'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '合同'}, {'entity_id': 2, 'colour': '#019688', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'company', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '公司或人'}, {'entity_id': 3, 'colour': '#FFC106', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'clause', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['content', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'content'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '条款'}]", "[{'edge_id': 1, 'colour': '#B31ACC', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contain', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'contain', 'clause'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 2, 'colour': '#673AB8', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'ownerSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'ownerSubject', 'company'], 'ds_address': '', 'alias': '我方主体'}, {'edge_id': 3, 'colour': '#374047', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'otherSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'otherSubject', 'company'], 'ds_address': '', 'alias': '对方主体'}]", '[]', '[]'], ['--', 'admin', '--', 'admin', 33, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-10-28 05:14:09', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-10-28 05:14:09', 'wqwq', '', 'pending', '[]', '[]', '[]', '[]'], ['--', 'admin', '--', 'admin', 30, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-10-28 05:05:21', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-10-28 05:05:21', 'dada', '', 'pending', '[]', '[]', '[]', '[]'], ['--', 'admin', '--', 'admin', 29, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-10-28 05:01:00', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-10-28 05:01:00', '300', '', 'pending', '[]', '[]', '[]', '[]'], ['--', 'admin', '--', 'admin', 28, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-10-28 04:49:59', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-10-28 04:50:09', '200', '', 'available', "[{'entity_id': 1, 'colour': '#CDDC39', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contract', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['id', 'string'], ['number', 'string'], ['currency', 'string'], ['amount', 'string'], ['signDate', 'string'], ['accountName', 'string'], ['bank', 'string'], ['bankNumber', 'string'], ['taxRate', 'string'], ['taxAmount', 'string'], ['amountWithoutTax', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'id', 'number', 'currency', 'amount', 'signDate', 'accountName', 'bank', 'bankNumber', 'taxRate', 'taxAmount', 'amountWithoutTax'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '合同'}, {'entity_id': 2, 'colour': '#673AB8', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'company', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '公司或人'}, {'entity_id': 3, 'colour': '#9E9E9E', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'clause', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['content', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'content'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '条款'}]", "[{'edge_id': 1, 'colour': '#673AB8', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contain', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'contain', 'clause'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 2, 'colour': '#795648', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'ownerSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'ownerSubject', 'company'], 'ds_address': '', 'alias': '我方主体'}, {'edge_id': 3, 'colour': '#ED679F', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'otherSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'otherSubject', 'company'], 'ds_address': '', 'alias': '对方主体'}]", '[]', '[]'], ['--', 'admin', '--', 'admin', 27, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-10-28 02:03:33', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-10-28 02:07:44', '1111', '', 'available', "[{'entity_id': 1, 'colour': '#CDDC39', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contract', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['id', 'string'], ['number', 'string'], ['currency', 'string'], ['amount', 'string'], ['signDate', 'string'], ['accountName', 'string'], ['bank', 'string'], ['bankNumber', 'string'], ['taxRate', 'string'], ['taxAmount', 'string'], ['amountWithoutTax', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'id', 'number', 'currency', 'amount', 'signDate', 'accountName', 'bank', 'bankNumber', 'taxRate', 'taxAmount', 'amountWithoutTax'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '合同'}, {'entity_id': 2, 'colour': '#0288D1', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'company', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '公司或人'}, {'entity_id': 3, 'colour': '#374047', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'clause', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['content', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'content'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '条款'}]", "[{'edge_id': 1, 'colour': '#673AB8', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contain', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'contain', 'clause'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 2, 'colour': '#374047', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'ownerSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'ownerSubject', 'company'], 'ds_address': '', 'alias': '我方主体'}, {'edge_id': 3, 'colour': '#3E52B5', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'otherSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'otherSubject', 'company'], 'ds_address': '', 'alias': '对方主体'}]", '[]', '[]'], ['--', 'admin', None, None, 26, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-10-27 23:21:09', 'lzg', '2021-10-29 07:26:28', 'vv', '', 'available', "[{'entity_id': 1, 'colour': '#805A9C', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': '33', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string'], ['name2', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'name2'], 'model': '', 'ds_address': '', 'alias': ''}, {'entity_id': 2, 'colour': '#8043CA', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': '36', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'ds_address': '', 'alias': ''}, {'entity_id': 3, 'colour': '#C4BA68', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': '37', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'ds_address': '', 'alias': ''}, {'entity_id': 4, 'colour': '#A46D24', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': '38', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'ds_address': ''}]", '[]', '[]', '[]'], ['--', 'admin', None, None, 25, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-10-27 23:20:15', 'admin', '2021-10-29 11:02:54', 'lzg', '', 'available', "[{'entity_id': 1, 'colour': '#92D427', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': '38', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'ds_address': ''}, {'entity_id': 2, 'colour': '#FC0F32', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': '39', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'ds_address': ''}]", '[]', '[]', '[]'], ['--', 'admin', '--', 'admin', 24, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-10-27 23:12:26', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-10-28 04:12:57', 'sdgfd', '', 'available', "[{'entity_id': 1, 'colour': '#FFC106', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'folder', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['path', 'string'], ['gns', 'string'], ['create_time', 'string'], ['rev', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'path', 'gns', 'create_time', 'rev'], 'model': 'Anysharedocumentmodel', 'ds_address': '', 'alias': '目录'}, {'entity_id': 2, 'colour': '#3E52B5', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'document', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['path', 'string'], ['creator', 'string'], ['create_time', 'string'], ['editor', 'string'], ['gns', 'string'], ['file_type', 'string'], ['modified_time', 'string'], ['rev', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'path', 'creator', 'create_time', 'editor', 'gns', 'file_type', 'modified_time', 'rev'], 'model': 'Anysharedocumentmodel', 'ds_address': '', 'alias': '文档'}, {'entity_id': 3, 'colour': '#795648', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'chapter', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['path', 'string'], ['level', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'path', 'level'], 'model': 'Anysharedocumentmodel', 'ds_address': '', 'alias': '章节'}, {'entity_id': 4, 'colour': '#FFC106', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'text', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Anysharedocumentmodel', 'ds_address': '', 'alias': '正文'}, {'entity_id': 5, 'colour': '#F44336', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'label', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['confidence', 'float'], ['adlabel_kcid', 'string'], ['kc_topic_tags', 'string'], ['type_as', 'boolean'], ['type_sa', 'boolean'], ['type_nw', 'boolean'], ['type_kc', 'boolean']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'confidence', 'adlabel_kcid', 'kc_topic_tags', 'type_as', 'type_sa', 'type_nw', 'type_kc'], 'model': 'Anysharedocumentmodel', 'ds_address': '', 'alias': '标签'}, {'entity_id': 6, 'colour': '#ED679F', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'desc', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Anysharedocumentmodel', 'ds_address': '', 'alias': '解释'}]", "[{'edge_id': 1, 'colour': '#795648', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'desc2document', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Anysharedocumentmodel', 'relations': ['desc', 'desc2document', 'document'], 'ds_address': '', 'alias': '出现于'}, {'edge_id': 2, 'colour': '#FF9800', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'desc2label', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['weight', 'float']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'weight'], 'model': 'Anysharedocumentmodel', 'relations': ['desc', 'desc2label', 'label'], 'ds_address': '', 'alias': '解释是'}, {'edge_id': 3, 'colour': '#0288D1', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'folder2folder', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Anysharedocumentmodel', 'relations': ['folder', 'folder2folder', 'folder'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 4, 'colour': '#374047', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'folder2document', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Anysharedocumentmodel', 'relations': ['folder', 'folder2document', 'document'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 5, 'colour': '#FF9800', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'document2chapter', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Anysharedocumentmodel', 'relations': ['document', 'document2chapter', 'chapter'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 6, 'colour': '#ED679F', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'document2text', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Anysharedocumentmodel', 'relations': ['document', 'document2text', 'text'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 7, 'colour': '#FF9800', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'text2text', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Anysharedocumentmodel', 'relations': ['text', 'text2text', 'text'], 'ds_address': '', 'alias': 'A相关B'}, {'edge_id': 8, 'colour': '#0288D1', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'chapter2text', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Anysharedocumentmodel', 'relations': ['chapter', 'chapter2text', 'text'], 'ds_address': '', 'alias': '内容是'}, {'edge_id': 9, 'colour': '#3E52B5', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'label2label', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['weight', 'float']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'weight'], 'model': 'Anysharedocumentmodel', 'relations': ['label', 'label2label', 'label'], 'ds_address': '', 'alias': '关联'}, {'edge_id': 10, 'colour': '#607D8B', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'label2document', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['weight', 'float']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'weight'], 'model': 'Anysharedocumentmodel', 'relations': ['label', 'label2document', 'document'], 'ds_address': '', 'alias': '出现于'}]", '[]', '[]']]
        column = ['create_user_email', 'create_user_name', 'update_user_email',
       'update_user_name', 'id', 'create_user', 'create_time', 'update_user',
       'update_time', 'ontology_name', 'ontology_des', 'otl_status', 'entity',
       'edge', 'used_task', 'all_task']
        self.ret_firstpage = pd.DataFrame(ret_10row, columns=column)
        self.ret_all = pd.DataFrame(ret_43row, columns=column)

        task_in_table_row = []
        column = ['task_id', 'ontology_id', 'create_user', 'task_name', 'task_type',
       'create_time', 'finished_time', 'task_status', 'celery_task_id',
       'result', 'file_list', 'ds_id', 'postfix']
        self.task_in_table = pd.DataFrame(task_in_table_row, columns=column)

        # mock graph_dao.getdatabyotlid
        graph_dao.getdatabyotlid = mock.Mock(return_value=[])

        # mock task_dao_onto.get_all_by_otlid
        task_dao_onto.get_all_by_otlid = mock.Mock(return_value=self.task_in_table)

    # success
    def test_getall_success(self):
        # 查询第一页
        # mock otl_dao.getall
        otl_dao.getall = mock.Mock(return_value=self.ret_firstpage)
        args = {'page': '1', 'size': '10', 'order': 'descend', 'timestamp': '1637053016390'}
        args["res_list"] = []
        host_url = 'http://10.4.135.45:6475/'
        res = otl_service.getall(args, host_url)
        self.assertEqual(res[0], 200)

        # 查询全部
        # mock otl_dao.getall
        otl_dao.getall = mock.Mock(return_value=self.ret_all)
        args = {'page': '-1', 'size': '10', 'order': 'descend', 'timestamp': '1637053016390'}
        args["res_list"] = []
        host_url = 'http://10.4.135.45:6475/'
        res = otl_service.getall(args, host_url)
        self.assertEqual(res[0], 200)

    # 异常
    def test_getall_exception(self):
        # mock otl_dao.getall
        otl_dao.getall = mock.Mock(return_value=[], side_effect=Exception('database Unusable!'))
        args = {'page': '-1', 'size': '10', 'order': 'descend', 'timestamp': '1637053016390'}
        host_url = 'http://10.4.135.45:6475/'
        res = otl_service.getall(args, host_url)
        self.assertEqual(res[0], 500)


# test模糊查询
class Test_getbyotlname(TestCase):
    def setUp(self) -> None:
        self.otlid = ""
        # self.args = {'otlname': '', 'otl_status': 'all', 'page': '1', 'size': '10', 'order': 'ascend', 'timestamp': '1637201113677'}
        self.host_url = 'http://10.4.135.45:6475/'

        # mock otl_dao.getCount
        otl_dao.getCount = mock.Mock(return_value=44)
        # mock otl_dao.getall
        ret_row = [['--', 'admin', '--', 'admin', 81, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-17 03:44:05', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-17 03:44:05', '4', '', 'pending', '[]', '[]', '[]', '[]'], ['--', 'admin', '--', 'admin', 80, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-16 20:43:39', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-16 20:43:39', 'benti2', '', 'pending', '[]', '[]', '[]', '[]'], ['--', 'admin', '--', 'admin', 79, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-16 03:54:10', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-16 03:54:10', 'benti1', '', 'pending', '[]', '[]', '[]', '[]'], ['--', 'admin', '--', 'admin', 78, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-16 03:36:20', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-16 03:36:20', 'brnti', '', 'pending', '[]', '[]', '[]', '[]'], ['--', 'admin', '--', 'admin', 77, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-16 03:32:19', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-16 03:32:19', 'benti', '', 'pending', '[]', '[]', '[]', '[]'], ['--', 'admin', '--', 'admin', 76, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-15 21:39:06', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-15 21:39:06', '23213213', '', 'pending', '[]', '[]', '[]', '[]'], ['--', 'admin', '--', 'admin', 75, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-15 21:35:18', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-15 21:41:37', 'ewqeqewqewq', '', 'available', "[{'entity_id': 1, 'colour': '#5C539B', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'A', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'ds_address': '', 'alias': ''}, {'entity_id': 2, 'colour': '#E39640', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'B', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'ds_address': '', 'alias': ''}]", "[{'edge_id': 1, 'colour': '#5C539B', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_id': '', 'extract_type': '', 'name': 'A_2_B', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'relations': ['A', 'A_2_B', 'B'], 'ds_address': '', 'alias': ''}]", '[]', '[]'], ['--', 'admin', '--', 'admin', 74, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-15 04:09:03', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-15 04:16:00', 'eqwe', '', 'available', "[{'entity_id': 1, 'colour': '#5C539B', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': '22', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'ds_address': '', 'alias': ''}]", '[]', '[]', '[]'], ['--', 'admin', '--', 'admin', 73, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-15 03:23:38', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-15 03:23:49', '00000', '', 'available', "[{'entity_id': 1, 'colour': '#607D8B', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contract', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['id', 'string'], ['number', 'string'], ['currency', 'string'], ['amount', 'string'], ['sign_date', 'string'], ['account_name', 'string'], ['bank', 'string'], ['bank_number', 'string'], ['tax_rate', 'string'], ['tax_amount', 'string'], ['amount_without_tax', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'id', 'number', 'currency', 'amount', 'sign_date', 'account_name', 'bank', 'bank_number', 'tax_rate', 'tax_amount', 'amount_without_tax'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '合同'}, {'entity_id': 2, 'colour': '#B31ACC', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'company', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '公司或人'}, {'entity_id': 3, 'colour': '#00BDD4', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'clause', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['content', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'content'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '条款'}]", "[{'edge_id': 1, 'colour': '#E91F64', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contain', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'contain', 'clause'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 2, 'colour': '#00BDD4', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'ownerSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'ownerSubject', 'company'], 'ds_address': '', 'alias': '我方主体'}, {'edge_id': 3, 'colour': '#8BC34A', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'otherSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'otherSubject', 'company'], 'ds_address': '', 'alias': '对方主体'}]", '[]', '[]'], ['--', 'admin', '--', 'admin', 72, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-15 03:17:13', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-15 03:17:46', '23213233', '', 'available', "[{'entity_id': 1, 'colour': '#374047', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contract', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['id', 'string'], ['number', 'string'], ['currency', 'string'], ['amount', 'string'], ['sign_date', 'string'], ['account_name', 'string'], ['bank', 'string'], ['bank_number', 'string'], ['tax_rate', 'string'], ['tax_amount', 'string'], ['amount_without_tax', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'id', 'number', 'currency', 'amount', 'sign_date', 'account_name', 'bank', 'bank_number', 'tax_rate', 'tax_amount', 'amount_without_tax'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '合同'}, {'entity_id': 2, 'colour': '#354675', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'company', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '公司或人'}, {'entity_id': 3, 'colour': '#9E9E9E', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'clause', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['content', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'content'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '条款'}]", "[{'edge_id': 1, 'colour': '#8BC34A', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contain', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'contain', 'clause'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 2, 'colour': '#019688', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'ownerSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'ownerSubject', 'company'], 'ds_address': '', 'alias': '我方主体'}, {'edge_id': 3, 'colour': '#E91F64', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'otherSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'otherSubject', 'company'], 'ds_address': '', 'alias': '对方主体'}]", '[]', '[]']]
        column = ['create_user_email', 'create_user_name', 'update_user_email', 'update_user_name', 'id', 'create_user', 'create_time', 'update_user', 'update_time', 'ontology_name', 'ontology_des', 'otl_status', 'entity', 'edge', 'used_task', 'all_task']
        ret = pd.DataFrame(ret_row, columns=column)
        otl_dao.getall = mock.Mock(return_value=ret)

        # mock otl_dao.getcountbystate
        otl_dao.getcountbystate = mock.Mock(return_value=30)
        # mock otl_dao.getallbystate
        ret_row = [[75, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-15 21:35:18', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-15 21:41:37', 'ewqeqewqewq', '', 'available', "[{'entity_id': 1, 'colour': '#5C539B', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'A', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'ds_address': '', 'alias': ''}, {'entity_id': 2, 'colour': '#E39640', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'B', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'ds_address': '', 'alias': ''}]", "[{'edge_id': 1, 'colour': '#5C539B', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_id': '', 'extract_type': '', 'name': 'A_2_B', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'relations': ['A', 'A_2_B', 'B'], 'ds_address': '', 'alias': ''}]", '[]', '[]'], [74, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-15 04:09:03', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-15 04:16:00', 'eqwe', '', 'available', "[{'entity_id': 1, 'colour': '#5C539B', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': '22', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'ds_address': '', 'alias': ''}]", '[]', '[]', '[]'], [73, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-15 03:23:38', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-15 03:23:49', '00000', '', 'available', "[{'entity_id': 1, 'colour': '#607D8B', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contract', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['id', 'string'], ['number', 'string'], ['currency', 'string'], ['amount', 'string'], ['sign_date', 'string'], ['account_name', 'string'], ['bank', 'string'], ['bank_number', 'string'], ['tax_rate', 'string'], ['tax_amount', 'string'], ['amount_without_tax', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'id', 'number', 'currency', 'amount', 'sign_date', 'account_name', 'bank', 'bank_number', 'tax_rate', 'tax_amount', 'amount_without_tax'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '合同'}, {'entity_id': 2, 'colour': '#B31ACC', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'company', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '公司或人'}, {'entity_id': 3, 'colour': '#00BDD4', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'clause', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['content', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'content'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '条款'}]", "[{'edge_id': 1, 'colour': '#E91F64', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contain', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'contain', 'clause'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 2, 'colour': '#00BDD4', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'ownerSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'ownerSubject', 'company'], 'ds_address': '', 'alias': '我方主体'}, {'edge_id': 3, 'colour': '#8BC34A', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'otherSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'otherSubject', 'company'], 'ds_address': '', 'alias': '对方主体'}]", '[]', '[]'], [72, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-15 03:17:13', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-15 03:17:46', '23213233', '', 'available', "[{'entity_id': 1, 'colour': '#374047', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contract', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['id', 'string'], ['number', 'string'], ['currency', 'string'], ['amount', 'string'], ['sign_date', 'string'], ['account_name', 'string'], ['bank', 'string'], ['bank_number', 'string'], ['tax_rate', 'string'], ['tax_amount', 'string'], ['amount_without_tax', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'id', 'number', 'currency', 'amount', 'sign_date', 'account_name', 'bank', 'bank_number', 'tax_rate', 'tax_amount', 'amount_without_tax'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '合同'}, {'entity_id': 2, 'colour': '#354675', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'company', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '公司或人'}, {'entity_id': 3, 'colour': '#9E9E9E', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'clause', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['content', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'content'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '条款'}]", "[{'edge_id': 1, 'colour': '#8BC34A', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contain', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'contain', 'clause'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 2, 'colour': '#019688', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'ownerSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'ownerSubject', 'company'], 'ds_address': '', 'alias': '我方主体'}, {'edge_id': 3, 'colour': '#E91F64', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'otherSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'otherSubject', 'company'], 'ds_address': '', 'alias': '对方主体'}]", '[]', '[]'], [70, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-15 02:41:15', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-15 02:41:27', 'sddds', '', 'available', "[{'entity_id': 1, 'colour': '#9E9E9E', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contract', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['id', 'string'], ['number', 'string'], ['currency', 'string'], ['amount', 'string'], ['sign_date', 'string'], ['account_name', 'string'], ['bank', 'string'], ['bank_number', 'string'], ['tax_rate', 'string'], ['tax_amount', 'string'], ['amount_without_tax', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'id', 'number', 'currency', 'amount', 'sign_date', 'account_name', 'bank', 'bank_number', 'tax_rate', 'tax_amount', 'amount_without_tax'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '合同'}, {'entity_id': 2, 'colour': '#ED679F', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'company', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '公司或人'}, {'entity_id': 3, 'colour': '#FFC106', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'clause', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['content', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'content'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '条款'}]", "[{'edge_id': 1, 'colour': '#673AB8', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contain', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'contain', 'clause'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 2, 'colour': '#9E9E9E', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'ownerSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'ownerSubject', 'company'], 'ds_address': '', 'alias': '我方主体'}, {'edge_id': 3, 'colour': '#F44336', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'otherSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'otherSubject', 'company'], 'ds_address': '', 'alias': '对方主体'}]", '[]', '[]'], [69, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-15 02:34:36', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-15 02:35:20', 'ces', '', 'available', "[{'entity_id': 1, 'colour': '#FFC106', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contract', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['id', 'string'], ['number', 'string'], ['currency', 'string'], ['amount', 'string'], ['sign_date', 'string'], ['account_name', 'string'], ['bank', 'string'], ['bank_number', 'string'], ['tax_rate', 'string'], ['tax_amount', 'string'], ['amount_without_tax', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'id', 'number', 'currency', 'amount', 'sign_date', 'account_name', 'bank', 'bank_number', 'tax_rate', 'tax_amount', 'amount_without_tax'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '合同'}, {'entity_id': 2, 'colour': '#FF9800', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'company', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '公司或人'}, {'entity_id': 3, 'colour': '#019688', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'clause', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['content', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'content'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '条款'}]", "[{'edge_id': 1, 'colour': '#00BDD4', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contain', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'contain', 'clause'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 2, 'colour': '#354675', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'ownerSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'ownerSubject', 'company'], 'ds_address': '', 'alias': '我方主体'}, {'edge_id': 3, 'colour': '#448AFF', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'otherSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'otherSubject', 'company'], 'ds_address': '', 'alias': '对方主体'}]", '[]', '[]'], [68, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-15 02:25:22', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-15 02:54:01', 'ewqeq', '', 'available', "[{'entity_id': 1, 'colour': '#9E9E9E', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'person', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'AImodel', 'ds_address': '', 'alias': '人'}, {'entity_id': 2, 'colour': '#448AFF', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'enterprise', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['financing', 'string'], ['financing_amount', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'financing', 'financing_amount'], 'model': 'AImodel', 'ds_address': '', 'alias': '公司'}, {'entity_id': 3, 'colour': '#ED679F', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'job_title', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'AImodel', 'ds_address': '', 'alias': '职位名称'}, {'entity_id': 4, 'colour': '#ED679F', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'production', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['publish_date', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'publish_date'], 'model': 'AImodel', 'ds_address': '', 'alias': '产品'}, {'entity_id': 5, 'colour': '#CDDC39', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'lead_investor', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'AImodel', 'ds_address': '', 'alias': '领投方'}, {'entity_id': 6, 'colour': '#3E52B5', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'acquirer', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'AImodel', 'ds_address': '', 'alias': '收购者'}, {'entity_id': 7, 'colour': '#607D8B', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'algorithm_proposer', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'AImodel', 'ds_address': '', 'alias': '作者'}, {'entity_id': 8, 'colour': '#374047', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'algorithm', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'AImodel', 'ds_address': '', 'alias': '算法'}, {'entity_id': 9, 'colour': '#F44336', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'paper', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['journal', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'journal'], 'model': 'AImodel', 'ds_address': '', 'alias': '论文'}, {'entity_id': 10, 'colour': '#795648', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'conference', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['datetime', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'datetime'], 'model': 'AImodel', 'ds_address': '', 'alias': '会议'}, {'entity_id': 11, 'colour': '#673AB8', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'location', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'AImodel', 'ds_address': '', 'alias': '地点'}]", "[{'edge_id': 1, 'colour': '#F44336', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'work_on', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'AImodel', 'relations': ['person', 'work_on', 'enterprise'], 'ds_address': '', 'alias': '工作单位'}, {'edge_id': 2, 'colour': '#45639C', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'position', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'AImodel', 'relations': ['person', 'position', 'job_title'], 'ds_address': '', 'alias': '职位'}, {'edge_id': 3, 'colour': '#FFC106', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'develop', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'AImodel', 'relations': ['enterprise', 'develop', 'production'], 'ds_address': '', 'alias': '开发'}, {'edge_id': 4, 'colour': '#F44336', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'invest', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'AImodel', 'relations': ['enterprise', 'invest', 'enterprise'], 'ds_address': '', 'alias': '投资'}, {'edge_id': 5, 'colour': '#9E9E9E', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'lead', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'AImodel', 'relations': ['lead_investor', 'lead', 'enterprise'], 'ds_address': '', 'alias': '领投'}, {'edge_id': 6, 'colour': '#FF9800', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'take_over', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'AImodel', 'relations': ['acquirer', 'take_over', 'enterprise'], 'ds_address': '', 'alias': '收购'}, {'edge_id': 7, 'colour': '#448AFF', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'present', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'AImodel', 'relations': ['algorithm_proposer', 'present', 'algorithm'], 'ds_address': '', 'alias': '提出'}, {'edge_id': 8, 'colour': '#354675', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'publish', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'AImodel', 'relations': ['person', 'publish', 'paper'], 'ds_address': '', 'alias': '发表'}, {'edge_id': 9, 'colour': '#3E52B5', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'purchased_by', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'AImodel', 'relations': ['enterprise', 'purchased_by', 'enterprise'], 'ds_address': '', 'alias': '被收购'}, {'edge_id': 10, 'colour': '#45639C', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'venue', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'AImodel', 'relations': ['conference', 'venue', 'location'], 'ds_address': '', 'alias': '举行地点'}, {'edge_id': 11, 'colour': '#E91F64', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'hold', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'AImodel', 'relations': ['enterprise', 'hold', 'conference'], 'ds_address': '', 'alias': '举办'}]", '[]', '[]'], [67, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-14 21:43:33', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-14 21:43:40', 'wqe', '', 'available', "[{'entity_id': 1, 'colour': '#C64F58', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'weq', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'ds_address': '', 'alias': ''}]", '[]', '[]', '[]'], [66, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-11 22:39:04', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-11 22:41:27', '4324', '', 'available', "[{'entity_id': 1, 'colour': '#8BC34A', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'folder', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['path', 'string'], ['gns', 'string'], ['create_time', 'string'], ['rev', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'path', 'gns', 'create_time', 'rev'], 'model': 'Anysharedocumentmodel', 'ds_address': '', 'alias': '目录'}, {'entity_id': 2, 'colour': '#B31ACC', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'document', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['path', 'string'], ['creator', 'string'], ['create_time', 'string'], ['editor', 'string'], ['gns', 'string'], ['file_type', 'string'], ['modified_time', 'string'], ['rev', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'path', 'creator', 'create_time', 'editor', 'gns', 'file_type', 'modified_time', 'rev'], 'model': 'Anysharedocumentmodel', 'ds_address': '', 'alias': '文档'}, {'entity_id': 3, 'colour': '#8BC34A', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'chapter', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['path', 'string'], ['level', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'path', 'level'], 'model': 'Anysharedocumentmodel', 'ds_address': '', 'alias': '章节'}, {'entity_id': 5, 'colour': '#00BDD4', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'label', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['confidence', 'float'], ['adlabel_kcid', 'string'], ['kc_topic_tags', 'string'], ['type_as', 'boolean'], ['type_sa', 'boolean'], ['type_nw', 'boolean'], ['type_kc', 'boolean']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'confidence', 'adlabel_kcid', 'kc_topic_tags', 'type_as', 'type_sa', 'type_nw', 'type_kc'], 'model': 'Anysharedocumentmodel', 'ds_address': '', 'alias': '标签'}]", "[{'edge_id': 3, 'colour': '#3E52B5', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'folder2folder', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Anysharedocumentmodel', 'relations': ['folder', 'folder2folder', 'folder'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 4, 'colour': '#607D8B', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'folder2document', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Anysharedocumentmodel', 'relations': ['folder', 'folder2document', 'document'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 5, 'colour': '#ED679F', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'document2chapter', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Anysharedocumentmodel', 'relations': ['document', 'document2chapter', 'chapter'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 9, 'colour': '#673AB8', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'label2label', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['weight', 'float']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'weight'], 'model': 'Anysharedocumentmodel', 'relations': ['label', 'label2label', 'label'], 'ds_address': '', 'alias': '关联'}, {'edge_id': 10, 'colour': '#448AFF', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'label2document', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['weight', 'float']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'weight'], 'model': 'Anysharedocumentmodel', 'relations': ['label', 'label2document', 'document'], 'ds_address': '', 'alias': '出现于'}]", '[]', '[]'], [64, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-09 02:21:05', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-09 02:23:20', '本体', '', 'available', "[{'entity_id': 1, 'colour': '#45639C', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'folder', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string'], ['path', 'string'], ['gns', 'string'], ['create_time', 'string'], ['rev', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'path', 'gns', 'create_time', 'rev'], 'model': '', 'ds_address': '', 'alias': '目录'}, {'entity_id': 2, 'colour': '#FF9800', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'document', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string'], ['path', 'string'], ['creator', 'string'], ['create_time', 'string'], ['editor', 'string'], ['gns', 'string'], ['file_type', 'string'], ['modified_time', 'string'], ['rev', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'path', 'creator', 'create_time', 'editor', 'gns', 'file_type', 'modified_time', 'rev'], 'model': '', 'ds_address': '', 'alias': '文档'}, {'entity_id': 3, 'colour': '#0288D1', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'chapter', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string'], ['path', 'string'], ['level', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'path', 'level'], 'model': '', 'ds_address': '', 'alias': '章节'}, {'entity_id': 4, 'colour': '#CDDC39', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'text', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'ds_address': '', 'alias': '正文'}, {'entity_id': 5, 'colour': '#354675', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'label', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string'], ['confidence', 'float'], ['adlabel_kcid', 'string'], ['kc_topic_tags', 'string'], ['type_as', 'boolean'], ['type_sa', 'boolean'], ['type_nw', 'boolean'], ['type_kc', 'boolean']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'confidence', 'adlabel_kcid', 'kc_topic_tags', 'type_as', 'type_sa', 'type_nw', 'type_kc'], 'model': '', 'ds_address': '', 'alias': '标签'}, {'entity_id': 6, 'colour': '#E91F64', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'desc', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'ds_address': '', 'alias': '解释'}, {'entity_id': 7, 'colour': '#45639C', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contract', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string'], ['id', 'string'], ['number', 'string'], ['currency', 'string'], ['amount', 'string'], ['sign_date', 'string'], ['account_name', 'string'], ['bank', 'string'], ['bank_number', 'string'], ['tax_rate', 'string'], ['tax_amount', 'string'], ['amount_without_tax', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'id', 'number', 'currency', 'amount', 'sign_date', 'account_name', 'bank', 'bank_number', 'tax_rate', 'tax_amount', 'amount_without_tax'], 'model': '', 'ds_address': '', 'alias': '合同'}, {'entity_id': 8, 'colour': '#448AFF', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'company', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'ds_address': '', 'alias': '公司或人'}, {'entity_id': 9, 'colour': '#45639C', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'clause', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string'], ['content', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'content'], 'model': '', 'ds_address': '', 'alias': '条款'}]", "[{'edge_id': 1, 'colour': '#0288D1', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'desc2document', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'relations': ['desc', 'desc2document', 'document'], 'ds_address': '', 'alias': '出现于'}, {'edge_id': 2, 'colour': '#CDDC39', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'desc2label', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string'], ['weight', 'float']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'weight'], 'model': '', 'relations': ['desc', 'desc2label', 'label'], 'ds_address': '', 'alias': '解释是'}, {'edge_id': 3, 'colour': '#F44336', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'folder2folder', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'relations': ['folder', 'folder2folder', 'folder'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 4, 'colour': '#374047', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'folder2document', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'relations': ['folder', 'folder2document', 'document'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 5, 'colour': '#B31ACC', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'document2chapter', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'relations': ['document', 'document2chapter', 'chapter'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 6, 'colour': '#354675', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'document2text', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'relations': ['document', 'document2text', 'text'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 7, 'colour': '#374047', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'text2text', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'relations': ['text', 'text2text', 'text'], 'ds_address': '', 'alias': 'A相关B'}, {'edge_id': 8, 'colour': '#B31ACC', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'chapter2text', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'relations': ['chapter', 'chapter2text', 'text'], 'ds_address': '', 'alias': '内容是'}, {'edge_id': 9, 'colour': '#673AB8', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'label2label', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string'], ['weight', 'float']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'weight'], 'model': '', 'relations': ['label', 'label2label', 'label'], 'ds_address': '', 'alias': '关联'}, {'edge_id': 10, 'colour': '#019688', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'label2document', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string'], ['weight', 'float']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'weight'], 'model': '', 'relations': ['label', 'label2document', 'document'], 'ds_address': '', 'alias': '出现于'}, {'edge_id': 11, 'colour': '#3E52B5', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contain', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'relations': ['contract', 'contain', 'clause'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 12, 'colour': '#E91F64', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'ownerSubject', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'relations': ['contract', 'ownerSubject', 'company'], 'ds_address': '', 'alias': '我方主体'}, {'edge_id': 13, 'colour': '#0288D1', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'otherSubject', 'source_table': [], 'source_type': 'manual', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': '', 'relations': ['contract', 'otherSubject', 'company'], 'ds_address': '', 'alias': '对方主体'}]", '[]', '[]']]
        column =['id', 'create_user', 'create_time', 'update_user', 'update_time', 'ontology_name', 'ontology_des', 'otl_status', 'entity', 'edge', 'used_task', 'all_task']
        ret = pd.DataFrame(ret_row, columns=column)
        otl_dao.getallbystate = mock.Mock(return_value=ret)

        # mock otl_dao.getCountbyname
        otl_dao.getCountbyname = mock.Mock(return_value=8)
        # mock otl_dao.getallbyname
        ret_row = [['--', 'admin', '--', 'admin', 79, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-16 03:54:10', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-16 03:54:10', 'benti1', '', 'pending', '[]', '[]', '[]', '[]'], ['--', 'admin', '--', 'admin', 76, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-15 21:39:06', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-15 21:39:06', '23213213', '', 'pending', '[]', '[]', '[]', '[]'], ['--', 'admin', '--', 'admin', 72, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-15 03:17:13', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-15 03:17:46', '23213233', '', 'available', "[{'entity_id': 1, 'colour': '#374047', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contract', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['id', 'string'], ['number', 'string'], ['currency', 'string'], ['amount', 'string'], ['sign_date', 'string'], ['account_name', 'string'], ['bank', 'string'], ['bank_number', 'string'], ['tax_rate', 'string'], ['tax_amount', 'string'], ['amount_without_tax', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'id', 'number', 'currency', 'amount', 'sign_date', 'account_name', 'bank', 'bank_number', 'tax_rate', 'tax_amount', 'amount_without_tax'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '合同'}, {'entity_id': 2, 'colour': '#354675', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'company', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '公司或人'}, {'entity_id': 3, 'colour': '#9E9E9E', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'clause', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['content', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'content'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '条款'}]", "[{'edge_id': 1, 'colour': '#8BC34A', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contain', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'contain', 'clause'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 2, 'colour': '#019688', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'ownerSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'ownerSubject', 'company'], 'ds_address': '', 'alias': '我方主体'}, {'edge_id': 3, 'colour': '#E91F64', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'otherSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'otherSubject', 'company'], 'ds_address': '', 'alias': '对方主体'}]", '[]', '[]'], [None, None, None, None, 56, '0242ac190002', '2021-11-01 11:07:08', '0242ac190002', '2021-11-01 11:07:08', '1', '123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890', 'available', "[{'entity_id': 1, 'colour': '#B31ACC', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contract', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['id', 'string'], ['number', 'string'], ['currency', 'string'], ['amount', 'string'], ['sign_date', 'string'], ['account_name', 'string'], ['bank', 'string'], ['bank_number', 'string'], ['tax_rate', 'string'], ['tax_amount', 'string'], ['amount_without_tax', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'id', 'number', 'currency', 'amount', 'sign_date', 'account_name', 'bank', 'bank_number', 'tax_rate', 'tax_amount', 'amount_without_tax'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '合同'}, {'entity_id': 2, 'colour': '#0288D1', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'company', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '公司或人'}, {'entity_id': 3, 'colour': '#FFC106', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'clause', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['content', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'content'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '条款'}]", "[{'edge_id': 1, 'colour': '#F44336', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contain', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'contain', 'clause'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 2, 'colour': '#CDDC39', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'ownerSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'ownerSubject', 'company'], 'ds_address': '', 'alias': '我方主体'}, {'edge_id': 3, 'colour': '#B31ACC', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'otherSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'otherSubject', 'company'], 'ds_address': '', 'alias': '对方主体'}]", '[]', '[]'], [None, None, None, None, 54, '0242ac190002', '2021-11-01 11:04:55', '0242ac190002', '2021-11-01 11:04:55', '12345678901234567890123456789012345678901234567890', 'dd', 'available', "[{'entity_id': 1, 'colour': '#B31ACC', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contract', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['id', 'string'], ['number', 'string'], ['currency', 'string'], ['amount', 'string'], ['sign_date', 'string'], ['account_name', 'string'], ['bank', 'string'], ['bank_number', 'string'], ['tax_rate', 'string'], ['tax_amount', 'string'], ['amount_without_tax', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'id', 'number', 'currency', 'amount', 'sign_date', 'account_name', 'bank', 'bank_number', 'tax_rate', 'tax_amount', 'amount_without_tax'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '合同'}, {'entity_id': 2, 'colour': '#0288D1', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'company', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '公司或人'}, {'entity_id': 3, 'colour': '#FFC106', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'clause', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['content', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'content'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '条款'}]", "[{'edge_id': 1, 'colour': '#F44336', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contain', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'contain', 'clause'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 2, 'colour': '#CDDC39', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'ownerSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'ownerSubject', 'company'], 'ds_address': '', 'alias': '我方主体'}, {'edge_id': 3, 'colour': '#B31ACC', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'otherSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'otherSubject', 'company'], 'ds_address': '', 'alias': '对方主体'}]", '[]', '[]'], ['--', 'admin', '--', 'admin', 37, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-10-29 03:47:33', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-10-31 21:02:26', '001', '', 'available', "[{'entity_id': 1, 'colour': '#FFC106', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contract', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['id', 'string'], ['number', 'string'], ['currency', 'string'], ['amount', 'string'], ['sign_date', 'string'], ['account_name', 'string'], ['bank', 'string'], ['bank_number', 'string'], ['tax_rate', 'string'], ['tax_amount', 'string'], ['amount_without_tax', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'id', 'number', 'currency', 'amount', 'sign_date', 'account_name', 'bank', 'bank_number', 'tax_rate', 'tax_amount', 'amount_without_tax'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '合同'}, {'entity_id': 2, 'colour': '#FF9800', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'company', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '公司或人'}, {'entity_id': 3, 'colour': '#795648', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'clause', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['content', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'content'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '条款'}]", "[{'edge_id': 1, 'colour': '#607D8B', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contain', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'contain', 'clause'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 2, 'colour': '#795648', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'ownerSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'ownerSubject', 'company'], 'ds_address': '', 'alias': '我方主体'}, {'edge_id': 3, 'colour': '#8BC34A', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'otherSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'otherSubject', 'company'], 'ds_address': '', 'alias': '对方主体'}]", '[]', '[]'], ['--', 'admin', '--', 'admin', 35, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-10-28 23:42:58', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-10-29 01:45:21', '11111', '', 'available', "[{'entity_id': 1, 'colour': '#F44336', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contract', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['id', 'string'], ['number', 'string'], ['currency', 'string'], ['amount', 'string'], ['sign_date', 'string'], ['account_name', 'string'], ['bank', 'string'], ['bank_number', 'string'], ['tax_rate', 'string'], ['tax_amount', 'string'], ['amount_without_tax', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'id', 'number', 'currency', 'amount', 'sign_date', 'account_name', 'bank', 'bank_number', 'tax_rate', 'tax_amount', 'amount_without_tax'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '合同'}, {'entity_id': 2, 'colour': '#354675', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'company', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '公司或人'}, {'entity_id': 3, 'colour': '#E91F64', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'clause', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['content', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'content'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '条款'}]", "[{'edge_id': 1, 'colour': '#CDDC39', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contain', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'contain', 'clause'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 2, 'colour': '#45639C', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'ownerSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'ownerSubject', 'company'], 'ds_address': '', 'alias': '我方主体'}, {'edge_id': 3, 'colour': '#45639C', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'otherSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'otherSubject', 'company'], 'ds_address': '', 'alias': '对方主体'}]", '[]', '[]'], ['--', 'admin', '--', 'admin', 27, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-10-28 02:03:33', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-10-28 02:07:44', '1111', '', 'available', "[{'entity_id': 1, 'colour': '#CDDC39', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contract', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['id', 'string'], ['number', 'string'], ['currency', 'string'], ['amount', 'string'], ['signDate', 'string'], ['accountName', 'string'], ['bank', 'string'], ['bankNumber', 'string'], ['taxRate', 'string'], ['taxAmount', 'string'], ['amountWithoutTax', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'id', 'number', 'currency', 'amount', 'signDate', 'accountName', 'bank', 'bankNumber', 'taxRate', 'taxAmount', 'amountWithoutTax'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '合同'}, {'entity_id': 2, 'colour': '#0288D1', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'company', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '公司或人'}, {'entity_id': 3, 'colour': '#374047', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'clause', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['content', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'content'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '条款'}]", "[{'edge_id': 1, 'colour': '#673AB8', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contain', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'contain', 'clause'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 2, 'colour': '#374047', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'ownerSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'ownerSubject', 'company'], 'ds_address': '', 'alias': '我方主体'}, {'edge_id': 3, 'colour': '#3E52B5', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'otherSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'otherSubject', 'company'], 'ds_address': '', 'alias': '对方主体'}]", '[]', '[]']]
        column = ['create_user_email', 'create_user_name', 'update_user_email', 'update_user_name', 'id', 'create_user', 'create_time', 'update_user', 'update_time', 'ontology_name', 'ontology_des', 'otl_status', 'entity', 'edge', 'used_task', 'all_task']
        ret = pd.DataFrame(ret_row, columns=column)
        otl_dao.getallbyname = mock.Mock(return_value=ret)

        # mock otl_dao.getCountbynameandstate
        otl_dao.getCountbynameandstate = mock.Mock(return_value=6)
        # mock otl_dao.getallbynameandstate
        ret_row = [[72, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-15 03:17:13', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-15 03:17:46', '23213233', '', 'available', "[{'entity_id': 1, 'colour': '#374047', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contract', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['id', 'string'], ['number', 'string'], ['currency', 'string'], ['amount', 'string'], ['sign_date', 'string'], ['account_name', 'string'], ['bank', 'string'], ['bank_number', 'string'], ['tax_rate', 'string'], ['tax_amount', 'string'], ['amount_without_tax', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'id', 'number', 'currency', 'amount', 'sign_date', 'account_name', 'bank', 'bank_number', 'tax_rate', 'tax_amount', 'amount_without_tax'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '合同'}, {'entity_id': 2, 'colour': '#354675', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'company', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '公司或人'}, {'entity_id': 3, 'colour': '#9E9E9E', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'clause', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['content', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'content'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '条款'}]", "[{'edge_id': 1, 'colour': '#8BC34A', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contain', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'contain', 'clause'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 2, 'colour': '#019688', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'ownerSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'ownerSubject', 'company'], 'ds_address': '', 'alias': '我方主体'}, {'edge_id': 3, 'colour': '#E91F64', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'otherSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'otherSubject', 'company'], 'ds_address': '', 'alias': '对方主体'}]", '[]', '[]'], [56, '0242ac190002', '2021-11-01 11:07:08', '0242ac190002', '2021-11-01 11:07:08', '1', '123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890', 'available', "[{'entity_id': 1, 'colour': '#B31ACC', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contract', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['id', 'string'], ['number', 'string'], ['currency', 'string'], ['amount', 'string'], ['sign_date', 'string'], ['account_name', 'string'], ['bank', 'string'], ['bank_number', 'string'], ['tax_rate', 'string'], ['tax_amount', 'string'], ['amount_without_tax', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'id', 'number', 'currency', 'amount', 'sign_date', 'account_name', 'bank', 'bank_number', 'tax_rate', 'tax_amount', 'amount_without_tax'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '合同'}, {'entity_id': 2, 'colour': '#0288D1', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'company', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '公司或人'}, {'entity_id': 3, 'colour': '#FFC106', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'clause', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['content', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'content'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '条款'}]", "[{'edge_id': 1, 'colour': '#F44336', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contain', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'contain', 'clause'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 2, 'colour': '#CDDC39', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'ownerSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'ownerSubject', 'company'], 'ds_address': '', 'alias': '我方主体'}, {'edge_id': 3, 'colour': '#B31ACC', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'otherSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'otherSubject', 'company'], 'ds_address': '', 'alias': '对方主体'}]", '[]', '[]'], [54, '0242ac190002', '2021-11-01 11:04:55', '0242ac190002', '2021-11-01 11:04:55', '12345678901234567890123456789012345678901234567890', 'dd', 'available', "[{'entity_id': 1, 'colour': '#B31ACC', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contract', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['id', 'string'], ['number', 'string'], ['currency', 'string'], ['amount', 'string'], ['sign_date', 'string'], ['account_name', 'string'], ['bank', 'string'], ['bank_number', 'string'], ['tax_rate', 'string'], ['tax_amount', 'string'], ['amount_without_tax', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'id', 'number', 'currency', 'amount', 'sign_date', 'account_name', 'bank', 'bank_number', 'tax_rate', 'tax_amount', 'amount_without_tax'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '合同'}, {'entity_id': 2, 'colour': '#0288D1', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'company', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '公司或人'}, {'entity_id': 3, 'colour': '#FFC106', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'clause', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['content', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'content'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '条款'}]", "[{'edge_id': 1, 'colour': '#F44336', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contain', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'contain', 'clause'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 2, 'colour': '#CDDC39', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'ownerSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'ownerSubject', 'company'], 'ds_address': '', 'alias': '我方主体'}, {'edge_id': 3, 'colour': '#B31ACC', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'otherSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'otherSubject', 'company'], 'ds_address': '', 'alias': '对方主体'}]", '[]', '[]'], [37, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-10-29 03:47:33', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-10-31 21:02:26', '001', '', 'available', "[{'entity_id': 1, 'colour': '#FFC106', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contract', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['id', 'string'], ['number', 'string'], ['currency', 'string'], ['amount', 'string'], ['sign_date', 'string'], ['account_name', 'string'], ['bank', 'string'], ['bank_number', 'string'], ['tax_rate', 'string'], ['tax_amount', 'string'], ['amount_without_tax', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'id', 'number', 'currency', 'amount', 'sign_date', 'account_name', 'bank', 'bank_number', 'tax_rate', 'tax_amount', 'amount_without_tax'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '合同'}, {'entity_id': 2, 'colour': '#FF9800', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'company', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '公司或人'}, {'entity_id': 3, 'colour': '#795648', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'clause', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['content', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'content'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '条款'}]", "[{'edge_id': 1, 'colour': '#607D8B', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contain', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'contain', 'clause'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 2, 'colour': '#795648', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'ownerSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'ownerSubject', 'company'], 'ds_address': '', 'alias': '我方主体'}, {'edge_id': 3, 'colour': '#8BC34A', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'otherSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'otherSubject', 'company'], 'ds_address': '', 'alias': '对方主体'}]", '[]', '[]'], [35, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-10-28 23:42:58', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-10-29 01:45:21', '11111', '', 'available', "[{'entity_id': 1, 'colour': '#F44336', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contract', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['id', 'string'], ['number', 'string'], ['currency', 'string'], ['amount', 'string'], ['sign_date', 'string'], ['account_name', 'string'], ['bank', 'string'], ['bank_number', 'string'], ['tax_rate', 'string'], ['tax_amount', 'string'], ['amount_without_tax', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'id', 'number', 'currency', 'amount', 'sign_date', 'account_name', 'bank', 'bank_number', 'tax_rate', 'tax_amount', 'amount_without_tax'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '合同'}, {'entity_id': 2, 'colour': '#354675', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'company', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '公司或人'}, {'entity_id': 3, 'colour': '#E91F64', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'clause', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['content', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'content'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '条款'}]", "[{'edge_id': 1, 'colour': '#CDDC39', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contain', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'contain', 'clause'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 2, 'colour': '#45639C', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'ownerSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'ownerSubject', 'company'], 'ds_address': '', 'alias': '我方主体'}, {'edge_id': 3, 'colour': '#45639C', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'otherSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'otherSubject', 'company'], 'ds_address': '', 'alias': '对方主体'}]", '[]', '[]'], [27, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-10-28 02:03:33', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-10-28 02:07:44', '1111', '', 'available', "[{'entity_id': 1, 'colour': '#CDDC39', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contract', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['id', 'string'], ['number', 'string'], ['currency', 'string'], ['amount', 'string'], ['signDate', 'string'], ['accountName', 'string'], ['bank', 'string'], ['bankNumber', 'string'], ['taxRate', 'string'], ['taxAmount', 'string'], ['amountWithoutTax', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'id', 'number', 'currency', 'amount', 'signDate', 'accountName', 'bank', 'bankNumber', 'taxRate', 'taxAmount', 'amountWithoutTax'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '合同'}, {'entity_id': 2, 'colour': '#0288D1', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'company', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '公司或人'}, {'entity_id': 3, 'colour': '#374047', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'clause', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['content', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'content'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '条款'}]", "[{'edge_id': 1, 'colour': '#673AB8', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contain', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'contain', 'clause'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 2, 'colour': '#374047', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'ownerSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'ownerSubject', 'company'], 'ds_address': '', 'alias': '我方主体'}, {'edge_id': 3, 'colour': '#3E52B5', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'otherSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'otherSubject', 'company'], 'ds_address': '', 'alias': '对方主体'}]", '[]', '[]']]
        column = ['id', 'create_user', 'create_time', 'update_user', 'update_time', 'ontology_name', 'ontology_des', 'otl_status', 'entity', 'edge', 'used_task', 'all_task']
        ret = pd.DataFrame(ret_row, columns=column)
        otl_dao.getallbynameandstate = mock.Mock(return_value=ret)

        # mock otl_dao.getbyid
        ret_row = [[60, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-03 02:36:25', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-03 02:43:39', 'ewwqeqeqw', '', 'available', "[{'entity_id': 1, 'colour': '#448AFF', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'folder', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Anysharedocumentmodel', 'ds_address': '', 'alias': '目录'}, {'entity_id': 2, 'colour': '#FFC106', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'document', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['path', 'string'], ['creator', 'string'], ['create_time', 'string'], ['editor', 'string'], ['gns', 'string'], ['file_type', 'string'], ['modified_time', 'string'], ['rev', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'path', 'creator', 'create_time', 'editor', 'gns', 'file_type', 'modified_time', 'rev'], 'model': 'Anysharedocumentmodel', 'ds_address': '', 'alias': '文档'}, {'entity_id': 5, 'colour': '#FF9800', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'label', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['confidence', 'float'], ['adlabel_kcid', 'string'], ['kc_topic_tags', 'string'], ['type_as', 'boolean'], ['type_sa', 'boolean'], ['type_nw', 'boolean'], ['type_kc', 'boolean']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'confidence', 'adlabel_kcid', 'kc_topic_tags', 'type_as', 'type_sa', 'type_nw', 'type_kc'], 'model': 'Anysharedocumentmodel', 'ds_address': '', 'alias': '标签'}, {'entity_id': 6, 'colour': '#ED679F', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'desc', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Anysharedocumentmodel', 'ds_address': '', 'alias': '解释'}]", "[{'edge_id': 1, 'colour': '#FFC106', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'desc2document', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Anysharedocumentmodel', 'relations': ['desc', 'desc2document', 'document'], 'ds_address': '', 'alias': '出现于'}, {'edge_id': 2, 'colour': '#448AFF', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'desc2label', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['weight', 'float']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'weight'], 'model': 'Anysharedocumentmodel', 'relations': ['desc', 'desc2label', 'label'], 'ds_address': '', 'alias': '解释是'}, {'edge_id': 3, 'colour': '#ED679F', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'folder2folder', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Anysharedocumentmodel', 'relations': ['folder', 'folder2folder', 'folder'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 4, 'colour': '#F44336', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'folder2document', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Anysharedocumentmodel', 'relations': ['folder', 'folder2document', 'document'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 9, 'colour': '#ED679F', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'label2label', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['weight', 'float']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'weight'], 'model': 'Anysharedocumentmodel', 'relations': ['label', 'label2label', 'label'], 'ds_address': '', 'alias': '关联'}, {'edge_id': 10, 'colour': '#374047', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'label2document', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['weight', 'float']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'weight'], 'model': 'Anysharedocumentmodel', 'relations': ['label', 'label2document', 'document'], 'ds_address': '', 'alias': '出现于'}]", '[]', '[]']]
        column = ['id', 'create_user', 'create_time', 'update_user', 'update_time', 'ontology_name', 'ontology_des', 'otl_status', 'entity', 'edge', 'used_task', 'all_task']
        ret = pd.DataFrame(ret_row, columns=column)
        otl_dao.getbyid = mock.Mock(return_value=ret)

    # success
    def test_getbyotlname_success(self):
        otlid = ""
        num = -1

        args = {'otlname': '', 'otl_status': 'all', 'page': '1', 'size': '10', 'order': 'ascend',
                'timestamp': '1637201113677'}
        res = otl_service.getbyotlname(otlid, args, self.host_url, num)
        self.assertEqual(res[0], 200)

        # 本体状态为available
        args = {'otlname': '', 'otl_status': 'available', 'page': '1', 'size': '10', 'order': 'ascend',
                'timestamp': '1637201113677'}
        res = otl_service.getbyotlname(otlid, args, self.host_url, num)
        self.assertEqual(res[0], 200)

        # otlname不为空
        args = {'otlname': '1', 'otl_status': 'all', 'page': '1', 'size': '10', 'order': 'ascend',
                'timestamp': '1637201113677'}
        res = otl_service.getbyotlname(otlid, args, self.host_url, num)
        self.assertEqual(res[0], 200)

        # ottname不为空 + 本体状态为available
        args = {'otlname': '1', 'otl_status': 'available', 'page': '1', 'size': '10', 'order': 'ascend',
                'timestamp': '1637201113677'}
        res = otl_service.getbyotlname(otlid, args, self.host_url, num)
        self.assertEqual(res[0], 200)

        otlid = '60'
        args = {}
        num = 1
        res = otl_service.getbyotlname(otlid, args, self.host_url, num)
        self.assertEqual(res[0], 200)

    # 异常
    def test_getbyotlname_exception(self):
        # mock otl_dao.getCount exception
        otl_dao.getCount = mock.Mock(return_value=[], side_effect = Exception('database error'))

        args = {'otlname': '', 'otl_status': 'all', 'page': '1', 'size': '10', 'order': 'ascend',
                'timestamp': '1637201113677'}
        num = -1
        res = otl_service.getbyotlname(self.otlid, args, self.host_url, num)
        self.assertEqual(res[0], 500)


class Test_delete(TestCase):
    def setUp(self) -> None:
        self.params_json = {'otlids': [80]}
        self.host_url = 'http://10.4.135.45:6475/'

        # mock otl_dao.getbyids
        ret_row = [[80, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-17 03:44:05', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-17 03:44:05', '4', '', 'pending', '[]', '[]', '[]', '[]']]
        column = ['id', 'create_user', 'create_time', 'update_user', 'update_time', 'ontology_name', 'ontology_des', 'otl_status', 'entity', 'edge', 'used_task', 'all_task']
        ret = pd.DataFrame(ret_row, columns=column)
        otl_dao.getbyids = mock.Mock(return_value=ret)

        # mock graph_dao.getdsgraphuse_otl
        useds_row = ['[25]', '[64]', '[37]', '[38]', '[39]', '[59]', '[60]', '[61]', '[62]', '[63]', '[66]', '[67]', '[68]', '[69]', '[]', '[70]', '[71]', '[72]', '[73]', '[74]', '[75]', '[76]', '[78]', '[81]', '[82]']
        column = ['graph_otl']
        useds = pd.DataFrame(useds_row, columns=column)
        graph_dao.getdsgraphuse_otl = mock.Mock(return_value=useds)

        # mock otl_dao.delete
        otl_dao.delete = mock.Mock(return_value=0)

        # mock task_dao_onto.get_otl_task_list
        ret_row = [[1, '80', '853ba1db-4e37-11eb-a57d-0242ac190002', 'test', 'table', '2021-11-16 03:32:59', None, None, None, None, "[['test', 'anydata', 'msql', 'running', 'mysql']]", '9', ''], [2, '80', '853ba1db-4e37-11eb-a57d-0242ac190002', 'test', 'table', '2021-11-16 03:33:35', None, None, None, None, "[['test', 'anydata', 'msql', 'running', 'mysql']]", '9', '']]
        column = ['task_id', 'ontology_id', 'create_user', 'task_name', 'task_type', 'create_time', 'finished_time', 'task_status', 'celery_task_id', 'result', 'file_list', 'ds_id', 'postfix']
        ret = pd.DataFrame(ret_row, columns=column)
        task_dao_onto.get_otl_task_list = mock.Mock(return_value=ret)

        # mock task_dao_onto.delete_otl_task
        task_dao_onto.delete_otl_task = mock.Mock(return_value=0)

    # success
    def test_delete_success(self):
        res = otl_service.delete(self.params_json, self.host_url)
        self.assertEqual(res[0], 200)

    # 异常
    def test_delete_exception(self):
        otl_dao.getbyids = mock.Mock(return_value=[], self_effect=Exception('database error'))
        res = otl_service.delete(self.params_json, self.host_url)
        self.assertEqual(res[0], 500)

    # id不存在
    def test_delete_idnotexits(self):
        # mock otl_dao.getbyids
        ret_row = []
        column = ['id', 'create_user', 'create_time', 'update_user', 'update_time', 'ontology_name', 'ontology_des', 'otl_status', 'entity', 'edge', 'used_task', 'all_task']
        ret = pd.DataFrame(ret_row, columns=column)
        otl_dao.getbyids = mock.Mock(return_value=ret)

        res = otl_service.delete(self.params_json, self.host_url)
        self.assertEqual(res[0], 500)

    # 本体正在被使用
    def test_delete_otlused(self):
        # mock graph_dao.getdsgraphuse_otl
        useds = ['[25]', '[64]', '[37]', '[38]', '[39]', '[59]', '[60]', '[61]', '[62]', '[63]', '[66]', '[67]', '[68]', '[69]', '[]', '[70]', '[71]', '[72]', '[73]', '[74]', '[75]', '[76]', '[78]', '[80]', '[82]']
        graph_dao.getdsgraphuse_otl = mock.Mock(return_value=useds)

        res = otl_service.delete(self.params_json, self.host_url)
        self.assertEqual(res[0], 500)

    # otl_dao.delete失败
    def test_delete_daofail(self):
        # mock otl_dao.delete
        otl_dao.delete = mock.Mock(return_value=-1)

        res = otl_service.delete(self.params_json, self.host_url)
        self.assertEqual(res[0], 200) # 为何返回正常


# test根据数据源id获取数据表
class Test_showtables(TestCase):
    def setUp(self) -> None:
        self.params_json = {"ds_id": 5, "data_source": "mysql"}

        # mock dsm_dao.getdatabyid数据
        data_mysql_row = [[5, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-10-28 21:59:18', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-10-28 21:59:18', 'mysql', 'structured', 'mysql', 'root', 'ZWlzb28uY29t', '10.4.107.186', 3320, 'anydata', 'standardExtraction', None]]
        data_as_row = [[5, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-10-22 05:11:32', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-11-15 02:36:21', '1', 'unstructured', 'as7', None, None, 'https://10.2.174.249', 1443, '123/合同提取测试', 'modelExtraction', '2']]
        data_hive_row = [[5, '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-10-28 21:59:18', '853ba1db-4e37-11eb-a57d-0242ac190002', '2021-10-28 21:59:18', 'mysql', 'structured', 'hive', 'root', 'ZWlzb28uY29t', '10.4.107.186', 3320, 'anydata', 'standardExtraction', None]]
        data_null_row = []
        columns = ['id', 'create_user', 'create_time', 'update_user', 'update_time', 'dsname', 'dataType', 'data_source', 'ds_user', 'ds_password', 'ds_address', 'ds_port', 'ds_path', 'extract_type', 'ds_auth']
        self.data_mysql = pd.DataFrame(data_mysql_row, columns=columns)
        self.data_as = pd.DataFrame(data_as_row, columns=columns)
        self.data_hive = pd.DataFrame(data_hive_row, columns=columns)
        self.data_null = pd.DataFrame(data_null_row, columns=columns)
        dsm_dao.getdatabyid = mock.Mock(return_value=self.data_mysql)

        # mock otl_dao.mysqlConnect
        count = 28
        ret = ['access_euop_request', 'account', 'account_manager_graph', 'account_role', 'author_token', 'data_source_table', 'deleted_service', 'graph_config_table', 'graph_db', 'graph_task_history_table', 'graph_task_table', 'guid', 'knowledge_graph', 'manager_graph', 'mode', 'msg_record', 'ontology_table', 'ontology_task_table', 'property', 'role', 'role_web', 'search_config', 'service', 'smtp_config', 'sync_service_record', 'system_config', 'test', 'web_resource']
        otl_dao.mysqlConnect = mock.Mock(return_value=[count, ret])

        otl_dao.asCon = mock.Mock(return_value=[200, {}])

        otl_dao.hiveConnect = mock.Mock(return_value=[0, []])

    # success
    def test_showtables_success(self):
        # mysql
        res = otl_service.showtables(self.params_json)
        self.assertEqual(res[0], 200)

        # as
        dsm_dao.getdatabyid = mock.Mock(return_value=self.data_as)
        params_json = {"ds_id": 1, "data_source": "as7", "postfix": ""}
        res = otl_service.showtables(params_json)
        self.assertEqual(res[0], 200)

        # hive
        dsm_dao.getdatabyid = mock.Mock(return_value=self.data_hive)
        params_json = {"ds_id": 1, "data_source": "hive"}
        res = otl_service.showtables(params_json)
        self.assertEqual(res[0], 200)

    # 数据库不存在该id
    def test_showtables_DS_NO_EXIST(self):
        # mock dsm_dao.getdatabyid
        dsm_dao.getdatabyid = mock.Mock(return_value=self.data_null)

        res = otl_service.showtables(self.params_json)
        self.assertEqual(res[0], 500)

    # data_source参数与数据库信息不符
    def test_showtables_PARAMETERS_ERROR(self):
        # mock dsm_dao.getdatabyid
        dsm_dao.getdatabyid = mock.Mock(return_value=self.data_mysql)

        params_json = {"ds_id": 5, "data_source": "as7"}
        res = otl_service.showtables(params_json)
        self.assertEqual(res[0], 500)

    # mysql解密密码错误
    def test_showtables_get_mysql_table_false(self):
        count = "-1"
        ret = ['access_euop_request', 'account', 'account_manager_graph', 'account_role', 'author_token', 'data_source_table', 'deleted_service', 'graph_config_table', 'graph_db', 'graph_task_history_table', 'graph_task_table', 'guid', 'knowledge_graph', 'manager_graph', 'mode', 'msg_record', 'ontology_table', 'ontology_task_table', 'property', 'role', 'role_web', 'search_config', 'service', 'smtp_config', 'sync_service_record', 'system_config', 'test', 'web_resource']
        otl_dao.mysqlConnect = mock.Mock(return_value=[count, ret])

        res = otl_service.showtables(self.params_json)
        self.assertEqual(res[0], 500)

    # exception
    def test_showtables_exception(self):
        # mock otl_dao.mysqlConnect
        otl_dao.mysqlConnect = mock.Mock(side_effect=Exception("Mysql Error"))
        res = otl_service.showtables(self.params_json)
        self.assertEqual(res[0], 500)

    # hive解密密码错误
    def test_showtables_get_hive_table_false(self):
        otl_dao.hiveConnect = mock.Mock(return_value=["-1", []])
        dsm_dao.getdatabyid = mock.Mock(return_value=self.data_hive)
        params_json = {"ds_id": 1, "data_source": "hive"}
        res = otl_service.showtables(params_json)
        self.assertEqual(res[0], 500)


# test获取所有本体id
class Test_getAllOtlIds(TestCase):
    def setUp(self) -> None:
        ret_row = [[73], [39], [52], [37], [56], [99], [27], [35], [82], [90], [54], [86], [57], [28], [88], [76], [72], [58], [29], [84], [89], [66], [65], [71], [95], [83], [63], [79], [78], [96], [69], [92], [97], [30], [85], [34], [98], [68], [75], [60], [87], [25], [38], [51], [62], [61], [94], [70], [24], [59], [91], [26], [67], [33], [36], [55], [64]]
        columns = ['id']
        ret = pd.DataFrame(ret_row, columns=columns)
        otl_dao.getAllOtlId = mock.Mock(return_value=ret)
    
    # success
    def test_getAllOtlIds_success(self):
        res = otl_service.getAllOtlIds()
        self.assertEqual(res[1], 200)
    
    # exception
    def test_getAllOtlIds_exception(self):
        otl_dao.getAllOtlId = mock.Mock(side_effect=Exception("database error"))
        res = otl_service.getAllOtlIds()
        self.assertEqual(res[1], 500)


# test根据本体id查询本体状态
class Test_getOtlStatus(TestCase):
    def setUp(self) -> None:
        df_row = [['available']]
        columns = ['otl_status']
        df = pd.DataFrame(df_row, columns=columns)
        otl_dao.getOtlStatusbyid = mock.Mock(return_value=df)
    
    # success
    def test_getOtlStatus_success(self):
        res = otl_service.getOtlStatus(24)
        self.assertEqual(res[1], 200)
    
    # exception
    def test_getOtlStatus_exception(self):
        otl_dao.getOtlStatusbyid = mock.Mock(side_effect=Exception("database error"))
        res = otl_service.getOtlStatus(24)
        self.assertEqual(res[1], 500)


# test保存复制的本体数据
class Test_saveCopyOtl(TestCase):
    def setUp(self) -> None:
        self.args = {'id': 62, 'create_user': '853ba1db-4e37-11eb-a57d-0242ac190002', 'create_time': '2021-11-03 03:28:34', 'update_user': '853ba1db-4e37-11eb-a57d-0242ac190002', 'update_time': '2021-11-15 02:36:35', 'ontology_name': 'nocontract', 'ontology_des': '', 'otl_status': 'available', 'entity': [{'entity_id': 1, 'colour': '#45639C', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contract', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['id', 'string'], ['number', 'string'], ['currency', 'string'], ['amount', 'string'], ['sign_date', 'string'], ['account_name', 'string'], ['bank', 'string'], ['bank_number', 'string'], ['tax_rate', 'string'], ['tax_amount', 'string'], ['amount_without_tax', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'id', 'number', 'currency', 'amount', 'sign_date', 'account_name', 'bank', 'bank_number', 'tax_rate', 'tax_amount', 'amount_without_tax'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '合同'}, {'entity_id': 2, 'colour': '#448AFF', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'company', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '公司或人'}, {'entity_id': 3, 'colour': '#45639C', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'clause', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string'], ['content', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name', 'content'], 'model': 'Contractmodel', 'ds_address': '', 'alias': '条款'}], 'edge': [{'edge_id': 1, 'colour': '#3E52B5', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'contain', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'contain', 'clause'], 'ds_address': '', 'alias': '包含'}, {'edge_id': 2, 'colour': '#E91F64', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'ownerSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'ownerSubject', 'company'], 'ds_address': '', 'alias': '我方主体'}, {'edge_id': 3, 'colour': '#0288D1', 'ds_name': '', 'dataType': '', 'data_source': '', 'ds_path': '', 'ds_id': '', 'extract_type': '', 'name': 'otherSubject', 'source_table': [], 'source_type': 'automatic', 'properties': [['name', 'string']], 'file_type': '', 'task_id': '', 'properties_index': ['name'], 'model': 'Contractmodel', 'relations': ['contract', 'otherSubject', 'company'], 'ds_address': '', 'alias': '对方主体'}], 'used_task': [], 'all_task': []}
        self.params_json = {"ontology_name": "name", "ontology_des": "des"}

        res_row = []
        res_name_exists_row = [['[]', '[]']]
        columns = ['entity', 'edge']
        res = pd.DataFrame(res_row, columns=columns)
        self.res_name_exists = pd.DataFrame(res_name_exists_row, columns=columns)
        otl_dao.get_ontology = mock.Mock(return_value=res)

        otl_dao.insertCopyOtl = mock.Mock(return_value=0)
    
    # success
    def test_saveCopyOtl_success(self):
        res = otl_service.saveCopyOtl(self.args, self.params_json)
        self.assertEqual(res[0], 200)
        
    # exception
    def test_saveCopyOtl_exception(self):
        otl_dao.get_ontology = mock.Mock(side_effect=Exception("database error"))
        res = otl_service.saveCopyOtl(self.args, self.params_json)
        self.assertEqual(res[0], 500)
        
    # 本体名称已存在
    def test_saveCopyOtl_ontology_exist(self):
        otl_dao.get_ontology = mock.Mock(return_value=self.res_name_exists)
        res = otl_service.saveCopyOtl(self.args, self.params_json)
        self.assertEqual(res[0], 500)

